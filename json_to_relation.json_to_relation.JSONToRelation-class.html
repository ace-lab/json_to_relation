<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>json_to_relation.json_to_relation.JSONToRelation</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        Package&nbsp;json_to_relation ::
        <a href="json_to_relation.json_to_relation-module.html">Module&nbsp;json_to_relation</a> ::
        Class&nbsp;JSONToRelation
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="json_to_relation.json_to_relation.JSONToRelation-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class JSONToRelation</h1><p class="nomargin-top"><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation">source&nbsp;code</a></span></p>
<pre class="base-tree">
object --+
         |
        <strong class="uidshort">JSONToRelation</strong>
</pre>

<hr />
<p>Given a source with JSON structures, derive a schema, and construct a 
  relational table. Source can be a local file name, a URL, a StringIO 
  pseudofile, or a Unix pipe.</p>
  <p>JSON structures in the source must be one per line. That is, each line
  in the source must be a self contained JSON object. Pretty printed 
  strings won't work.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">jsonSource</span>,
        <span class="summary-sig-arg">destination</span>,
        <span class="summary-sig-arg">schemaHints</span>=<span class="summary-sig-default">OrderedDict()</span>,
        <span class="summary-sig-arg">jsonParserInstance</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">loggingLevel</span>=<span class="summary-sig-default">20</span>,
        <span class="summary-sig-arg">logFile</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">mainTableName</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">Main</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">progressEvery</span>=<span class="summary-sig-default">1000</span>)</span><br />
      Create a JSON-to-Relation converter.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#flush" class="summary-sig-name">flush</a>(<span class="summary-sig-arg">self</span>)</span><br />
      MUST be called when no more items are to be converted.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.flush">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="setupLogging"></a><span class="summary-sig-name">setupLogging</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">loggingLevel</span>,
        <span class="summary-sig-arg">logFile</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.setupLogging">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#setParser" class="summary-sig-name">setParser</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">parserInstance</span>)</span><br />
      Set the parser instance to use for upcoming calls to the convert() 
      method.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.setParser">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#startNewTable" class="summary-sig-name">startNewTable</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">tableName</span>,
        <span class="summary-sig-arg">schemaHintsNewTable</span>)</span><br />
      Called by parsers when they need to start a new relational table 
      beyond the one that is created for them.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.startNewTable">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#getSourceName" class="summary-sig-name">getSourceName</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Request a human-readable name of the JSON source, which might be a 
      pipe, or a file, or something else.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getSourceName">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#setSchemaHints" class="summary-sig-name">setSchemaHints</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">schemaHints</span>,
        <span class="summary-sig-arg">tableName</span>=<span class="summary-sig-default">None</span>)</span><br />
      Given a schema hint dictionary, set the given table's schema to the 
      given dictionary.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.setSchemaHints">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">ColumnSpec</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#getSchemaHint" class="summary-sig-name">getSchemaHint</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">colName</span>,
        <span class="summary-sig-arg">tableName</span>=<span class="summary-sig-default">None</span>)</span><br />
      Given a column name, and a table name, return the ColumnSpec for that
      column in that table.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getSchemaHint">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="getSchemaHintByPos"></a><span class="summary-sig-name">getSchemaHintByPos</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">pos</span>,
        <span class="summary-sig-arg">tableName</span>=<span class="summary-sig-default">None</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getSchemaHintByPos">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="ensureColExistence"></a><span class="summary-sig-name">ensureColExistence</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">colName</span>,
        <span class="summary-sig-arg">colDataType</span>,
        <span class="summary-sig-arg">tableName</span>=<span class="summary-sig-default">None</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.ensureColExistence">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#convert" class="summary-sig-name">convert</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">prependColHeader</span>=<span class="summary-sig-default">False</span>)</span><br />
      Main user-facing API method.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.convert">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#pushString" class="summary-sig-name">pushString</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">whatToWrite</span>)</span><br />
      Pushes the given string straight to the output (pipe or file).</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.pushString">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#pushToTable" class="summary-sig-name">pushToTable</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">row</span>,
        <span class="summary-sig-arg">outFd</span>=<span class="summary-sig-default">None</span>)</span><br />
      Called both from convert(), and from some parsers to add one row to 
      one table.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.pushToTable">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#processFinishedRow" class="summary-sig-name">processFinishedRow</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">filledNewRow</span>,
        <span class="summary-sig-arg">outFd</span>)</span><br />
      When a row is finished, this method processes the row as per the 
      user's disposition.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.processFinishedRow">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#prepareMySQLRow" class="summary-sig-name">prepareMySQLRow</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">insertInfo</span>)</span><br />
      Receives either a triple ('tableName', 'insertSig', [valsArray]), or 
      the string 'FLUSH'.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.prepareMySQLRow">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">{String | None}</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#finalizeInsertStatement" class="summary-sig-name">finalizeInsertStatement</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Create a possibly multivalued INSERT statement from what is stored in
      self.currOutTable, self.currInsertSig, and self.currValsArray.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.finalizeInsertStatement">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">IOString</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#constructValuesStr" class="summary-sig-name">constructValuesStr</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">valsArrays</span>)</span><br />
      Takes an array of arrays that hold the values to use in an INSERT 
      statement.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.constructValuesStr">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">(ColumnSpec)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#getSchema" class="summary-sig-name">getSchema</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">tableName</span>=<span class="summary-sig-default">None</span>)</span><br />
      Returns an ordered list of ColumnSpec instances.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getSchema">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[String]</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#getColHeaders" class="summary-sig-name">getColHeaders</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">tableName</span>=<span class="summary-sig-default">None</span>)</span><br />
      Returns a list of column header names collected so far.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getColHeaders">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">int</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#getNextNewColPos" class="summary-sig-name">getNextNewColPos</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Returns the position of the next new column that may need to be added
      when a previously unseen JSON label is encountered.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getNextNewColPos">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="bumpNextNewColPos"></a><span class="summary-sig-name">bumpNextNewColPos</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.bumpNextNewColPos">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#calculateHeldBackDataSize" class="summary-sig-name">calculateHeldBackDataSize</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">valueArray</span>)</span><br />
      Computes number of ASCII bytes needed for the values in the given 
      array.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.calculateHeldBackDataSize">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">String</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="json_to_relation.json_to_relation.JSONToRelation-class.html#ensureLegalIdentifierChars" class="summary-sig-name">ensureLegalIdentifierChars</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">proposedMySQLName</span>)</span><br />
      Given a proposed MySQL identifier, such as a column name, return a 
      possibly modified name that will be acceptable to a MySQL database.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.ensureLegalIdentifierChars">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="makeFileCitation"></a><span class="summary-sig-name">makeFileCitation</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.makeFileCitation">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="bumpLineCounter"></a><span class="summary-sig-name">bumpLineCounter</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.bumpLineCounter">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="MAX_SQL_INT"></a><span class="summary-name">MAX_SQL_INT</span> = <code title="2147483647.0">2147483647.0</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="MIN_SQL_INT"></a><span class="summary-name">MIN_SQL_INT</span> = <code title="-2147483648.0">-2147483648.0</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="LEGAL_MYSQL_ATTRIBUTE_PATTERN"></a><span class="summary-name">LEGAL_MYSQL_ATTRIBUTE_PATTERN</span> = <code title="re.compile(r'^[\$\w]+$')">re.compile(r'^<code class="re-group">[</code>\$\w<code class="re-group">]</code><code class="re-op">+</code>$')</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="MAX_ALLOWED_PACKET_SIZE"></a><span class="summary-name">MAX_ALLOWED_PACKET_SIZE</span> = <code title="1000000">1000000</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="loggingInitialized"></a><span class="summary-name">loggingInitialized</span> = <code title="False">False</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="logger"></a><span class="summary-name">logger</span> = <code title="None">None</code>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">jsonSource</span>,
        <span class="sig-arg">destination</span>,
        <span class="sig-arg">schemaHints</span>=<span class="sig-default">OrderedDict()</span>,
        <span class="sig-arg">jsonParserInstance</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">loggingLevel</span>=<span class="sig-default">20</span>,
        <span class="sig-arg">logFile</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">mainTableName</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">Main</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">progressEvery</span>=<span class="sig-default">1000</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create a JSON-to-Relation converter. The JSON source can be a file 
  with JSON objects, a StringIO.StringIO string pseudo file, stdin, or a 
  MongoDB</p>
  <p>The destination can be a file, where CSV is written in Excel-readable 
  form, stdout, or a MySQL table specification, where the ouput rows will 
  be inserted.</p>
  <p>SchemaHints optionally specify the SQL types of particular columns. By
  default the processJSONObs() method will be conservative, and specify 
  numeric columns as DOUBLE. Even though all encountered values for one 
  column could be examined, and a more appropriate type chosen, such as INT
  when only 4-byte integers are ever seen, future additions to the table 
  might exceed the INT capacity for that column. Example</p>
  <p>If schemaHints is provided, it is a Dict mapping column names to 
  ColDataType. The column names in schemaHints must match the corresponding
  (fully nested) key names in the JSON objects:</p>
<pre class="literalblock">
   schemaHints dict: {'msg.length' : ColDataType.INT,
                      'chunkSize' : ColDataType.INT}
</pre>
  <p>For unit testing isolated methods in this class, set jsonSource and 
  destination to None.</p>
  <p>This constructor can be thought of as creating the main relational 
  table that will hold all results from the JSON parsers in relational 
  form. However, parsers may call startNewTable() to build any new tables 
  they wish.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>jsonSource</code></strong> ({InPipe | InString | InURI | InMongoDB}) - subclass of InputSource that wraps containing JSON structures, or
          a URL to such a source</li>
        <li><strong class="pname"><code>destination</code></strong> ({OutputPipe | OutputFile | OutputMySQLTable}) - instruction to were resulting rows are to be directed</li>
        <li><strong class="pname"><code>schemaHints</code></strong> (OrderedDict&lt;String,ColDataTYpe&gt;) - Dict mapping col names to data types (optional). Affects the 
          default (main) table.</li>
        <li><strong class="pname"><code>jsonParserInstance</code></strong> ({GenericJSONParser | EdXTrackLogJSONParser | 
          CourseraTrackLogJSONParser}) - a parser that takes one JSON string, and returns a CSV row, or 
          other desired output, like SQL dump statements. Parser also must 
          inform this parent object of any generated column names.</li>
        <li><strong class="pname"><code>loggingLevel</code></strong> ({logging.DEBUG | logging.WARN | logging.INFO | logging.ERROR | 
          logging.CRITICAL}) - level at which logging output is show.</li>
        <li><strong class="pname"><code>logFile</code></strong> (String) - path to file where log is to be written. Default is None: log to 
          stdout. A warning is logged if logFile is None and the 
          destination is OutputPipe. In this case logging messages will be 
          mixed in with the data output</li>
        <li><strong class="pname"><code>progressEvery</code></strong> ({int | None}) - number of JSON object to process before reporting the number in a
          log info msg. If None, no reporting</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'>ValueErrer</strong></code> - when value of jsonParserInstance is neither None, nor an instance 
        of GenericJSONParser, nor one of its subclasses.</li>
        <li><code><strong class='fraise'>ValueError</strong></code> - when jsonSource is not an instance of InPipe, InString, InURI, or 
        InMongoDB</li>
    </ul></dd>
    <dt>Overrides:
        object.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="flush"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">flush</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.flush">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>MUST be called when no more items are to be converted. Needed because 
  for SQL statements, value insertions are held back to accumulate multiple
  insert value for use in a single insert statement. This speeds up load 
  times into the databases later. If flush() is not called, output may be 
  missing.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="setParser"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setParser</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">parserInstance</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.setParser">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Set the parser instance to use for upcoming calls to the convert() 
  method.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>parserInstance</code></strong> ({GenericJSONParser | subclass}) - must be instance of GenericJSONParser or one of its subclasses</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="startNewTable"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">startNewTable</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">tableName</span>,
        <span class="sig-arg">schemaHintsNewTable</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.startNewTable">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Called by parsers when they need to start a new relational table 
  beyond the one that is created for them. Ex: edxTrackLogJSONParser.py 
  needs auxiliary tables for deeply embedded JSON structures with 
  unpredictable numbers of elements (e.g. problem state). The 
  schemaHintsNewTable is an optionally ordered dict. Parsers may add 
  additional columns later via calls to ensureColExistence(). Note that for
  MySQL load files such subsequent addition generates ALTER table, which 
  might be expensive. So, completeness of the schemaHintsNewTable dict is 
  recommended for MySQL load file outputs.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>tableName</code></strong> (String) - name by which parser will refer to this table.</li>
        <li><strong class="pname"><code>schemaHintsNewTable</code></strong> ([Ordered]Dict&lt;String,ColumnSpec&gt;) - dict that map column names to SQL types</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="getSourceName"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getSourceName</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getSourceName">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Request a human-readable name of the JSON source, which might be a 
  pipe, or a file, or something else. Each input source class knows to 
  provide such a name.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="setSchemaHints"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setSchemaHints</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">schemaHints</span>,
        <span class="sig-arg">tableName</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.setSchemaHints">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Given a schema hint dictionary, set the given table's schema to the 
  given dictionary. Any schema fragments already defined for table 
  tableName will be removed</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>schemaHints</code></strong> ([Ordered]Dict&lt;String,ColumnSpec&gt;) - dict mapping column names to ColumnSpec instances</li>
        <li><strong class="pname"><code>tableName</code></strong> (String) - name of table whose schema is to be changed. None changes the 
          main (default) table's schema</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="getSchemaHint"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getSchemaHint</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">colName</span>,
        <span class="sig-arg">tableName</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getSchemaHint">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Given a column name, and a table name, return the ColumnSpec for that 
  column in that table. If tableName is None, the table is assumed to be 
  the main (default) table.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>colName</code></strong> (String) - name of column whose ColumnSpec instance is wanted</li>
        <li><strong class="pname"><code>tableName</code></strong> ({String | None}) - name of table of which the column is a part</li>
    </ul></dd>
    <dt>Returns: ColumnSpec</dt>
        <dd>a ColumnSpec object that contains the SQL type name of the column</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'>KeyError</strong></code> - if either the table or the column don't exist.</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="convert"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">convert</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">prependColHeader</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.convert">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Main user-facing API method. Read from the JSON source establish in 
  the __init__() call. Create a MySQL schema as the JSON is read. Convert 
  each JSON object into the requested output format (e.g. CSV), and deliver
  it to the destination (e.g. a file)</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>prependColHeader</code></strong> (Boolean) - If true, the final destination, if it is stdout or a file, will 
          have the column names prepended. Note that this option requires 
          that the output file is first written to a temp file, and then 
          merged with the completed column name header row to the final 
          destination that was specified by the client.</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="pushString"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">pushString</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">whatToWrite</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.pushString">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Pushes the given string straight to the output (pipe or file). No 
  error checking is done. Used by underlying parsers for SQL other than 
  INSERT statements, such as DROP, CREATE.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>whatToWrite</code></strong> (String) - a complete SQL statement.</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="pushToTable"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">pushToTable</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">row</span>,
        <span class="sig-arg">outFd</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.pushToTable">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Called both from convert(), and from some parsers to add one row to 
  one table. For CSV outputs the target table is implied: there is only 
  one. But for parsers that generate INSERT statements, the targets might 
  be different tables on each call.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>row</code></strong> ({[&lt;any&gt;] | (String, String, [&lt;any&gt;])}) - either an array of CSV values, or a triplet (tableName, 
          insertSig, valsArray) (from MySQL INSERT-generating parsers)</li>
        <li><strong class="pname"><code>outFd</code></strong> (subclass of OutputDisposition) - subclass of OutputDisposition</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="processFinishedRow"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">processFinishedRow</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">filledNewRow</span>,
        <span class="sig-arg">outFd</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.processFinishedRow">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>When a row is finished, this method processes the row as per the 
  user's disposition. The method writes the row to a CSV file, or pipe, or 
  generates an SQL insert statement for later.</p>
  <p>The filledNewRow parameter looks different, depending on whether the 
  underlying parser generates MySQL insert statement information, or CSV 
  rows. The latter are just written to outFD. MySQL insert info looks like 
  this: ('tableName', 'insertSig', [valsArray]). The insertSig is a string 
  as needed for the INSERT statement's column names part. Ex.: 
  'col1,col2'.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>filledNewRow</code></strong> (List&lt;&lt;any&gt;&gt;) - the list of values for one row, possibly including empty fields</li>
        <li><strong class="pname"><code>outFd</code></strong> (OutputDisposition) - an instance of a class that writes to the destination</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="prepareMySQLRow"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">prepareMySQLRow</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">insertInfo</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.prepareMySQLRow">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Receives either a triple ('tableName', 'insertSig', [valsArray]), or 
  the string 'FLUSH'. Generates either None, or a legal MySQL insert 
  statement. The method is lazy.</p>
  <p>It collects values to be inserted into the same table, and the same 
  columns within that table, and returns a non-Null string only when the 
  incoming insertInfo is for a different table, or a different set of 
  columns in the same table (as the previous calls). In that case the 
  returned string is a legal MySQL INSERT statement, possibly 
  multi-valued.</p>
  <p>If insertInfo is the string 'FLUSH', then an INSERT statement is 
  returned for any held-back prior values.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>insertInfo</code></strong> ({(String, String, [&lt;any&gt;]) | String)}) - information on what to generate for MySQL dumps</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="finalizeInsertStatement"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">finalizeInsertStatement</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.finalizeInsertStatement">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create a possibly multivalued INSERT statement from what is stored in 
  self.currOutTable, self.currInsertSig, and self.currValsArray. Example 
  return:</p>
<pre class="literalblock">
  INSERT INTO myTable (col2, col2) VALUES
     ('foo',10),
     ('bar',20);
</pre>
  <dl class="fields">
    <dt>Returns: {String | None}</dt>
        <dd>a fully formed SQL INSERT statement, possibly including multiple 
          values. None if nothing to insert.</dd>
  </dl>
</td></tr></table>
</div>
<a name="constructValuesStr"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">constructValuesStr</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">valsArrays</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.constructValuesStr">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Takes an array of arrays that hold the values to use in an INSERT 
  statement. Ex: [['foo',10],['bar',20]]. Returns a StringIO string file 
  containing a legal INSERT statement's VALUES part: 
  ('foo',10),('bar',20)</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>valsArrays</code></strong> ([[&lt;any&gt;]]) - array of values arrays</li>
    </ul></dd>
    <dt>Returns: IOString</dt>
        <dd>IOString string file with legal VALUES section of INSERT 
          statement</dd>
  </dl>
</td></tr></table>
</div>
<a name="getSchema"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getSchema</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">tableName</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getSchema">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns an ordered list of ColumnSpec instances. Each such instance 
  holds column name and SQL type.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>tableName</code></strong> (String) - name of table for which schema is wanted. None: the main 
          (default) table.</li>
    </ul></dd>
    <dt>Returns: (ColumnSpec)</dt>
        <dd>ordered list of column information</dd>
  </dl>
</td></tr></table>
</div>
<a name="getColHeaders"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getColHeaders</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">tableName</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getColHeaders">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns a list of column header names collected so far.</p>
  <dl class="fields">
    <dt>Returns: [String]</dt>
        <dd>list of column headers that were discovered so far by an 
          associated JSON parser descending into a JSON structure.</dd>
  </dl>
</td></tr></table>
</div>
<a name="getNextNewColPos"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getNextNewColPos</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.getNextNewColPos">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns the position of the next new column that may need to be added 
  when a previously unseen JSON label is encountered.</p>
  <dl class="fields">
    <dt>Returns: int</dt>
        <dd>position in schema where the next new discovered column header is
          to go.</dd>
  </dl>
</td></tr></table>
</div>
<a name="calculateHeldBackDataSize"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">calculateHeldBackDataSize</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">valueArray</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.calculateHeldBackDataSize">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Computes number of ASCII bytes needed for the values in the given 
  array. Used to estimate when held-back INSERT data needs to be flushed to
  server. Ex: ['foo', 10] returns 7.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>valueArray</code></strong> ([&lt;any&gt;]) - array of mixed-type values to be INSERTed into MySQL at some 
          point</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="ensureLegalIdentifierChars"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ensureLegalIdentifierChars</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">proposedMySQLName</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="json_to_relation.json_to_relation-pysrc.html#JSONToRelation.ensureLegalIdentifierChars">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Given a proposed MySQL identifier, such as a column name, return a 
  possibly modified name that will be acceptable to a MySQL database. MySQL
  accepts alphanumeric, underscore, and dollar sign. Identifiers with other
  chars must be quoted. Quote characters embedded within the identifiers 
  must be doubled to be escaped.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>proposedMySQLName</code></strong> (String) - input name</li>
    </ul></dd>
    <dt>Returns: String</dt>
        <dd>the possibly modified, legal MySQL identifier</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Wed Oct 16 17:51:59 2013
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
