

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>json_to_relation Package &mdash; json_to_relation 0.2 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="json_to_relation 0.2 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">json_to_relation 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="json-to-relation-package">
<h1>json_to_relation Package<a class="headerlink" href="#json-to-relation-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-json_to_relation.col_data_type">
<span id="col-data-type-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">col_data_type</span></tt> Module<a class="headerlink" href="#module-json_to_relation.col_data_type" title="Permalink to this headline">¶</a></h2>
<p>Created on Sep 23, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="class">
<dt id="json_to_relation.col_data_type.ColDataType">
<em class="property">class </em><tt class="descclassname">json_to_relation.col_data_type.</tt><tt class="descname">ColDataType</tt><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType" title="Permalink to this definition">¶</a></dt>
<dd><p>Enum for datatypes that can be converted to 
MySQL datatypes</p>
<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.BIGINT">
<tt class="descname">BIGINT</tt><em class="property"> = 8</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.BIGINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.BOOL">
<tt class="descname">BOOL</tt><em class="property"> = 14</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.BOOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.DATE">
<tt class="descname">DATE</tt><em class="property"> = 11</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.DATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.DATETIME">
<tt class="descname">DATETIME</tt><em class="property"> = 13</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.DATETIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.DOUBLE">
<tt class="descname">DOUBLE</tt><em class="property"> = 10</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.DOUBLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.FLOAT">
<tt class="descname">FLOAT</tt><em class="property"> = 9</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.FLOAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.INT">
<tt class="descname">INT</tt><em class="property"> = 7</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.INT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.LONGTEXT">
<tt class="descname">LONGTEXT</tt><em class="property"> = 3</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.LONGTEXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.MEDIUMINT">
<tt class="descname">MEDIUMINT</tt><em class="property"> = 6</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.MEDIUMINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.MEDIUMTEXT">
<tt class="descname">MEDIUMTEXT</tt><em class="property"> = 2</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.MEDIUMTEXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.SMALLINT">
<tt class="descname">SMALLINT</tt><em class="property"> = 5</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.SMALLINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.TEXT">
<tt class="descname">TEXT</tt><em class="property"> = 1</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.TEXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.TIME">
<tt class="descname">TIME</tt><em class="property"> = 12</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.TINYINT">
<tt class="descname">TINYINT</tt><em class="property"> = 4</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.TINYINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.TINYTEXT">
<tt class="descname">TINYTEXT</tt><em class="property"> = 0</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.TINYTEXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.UUID">
<tt class="descname">UUID</tt><em class="property"> = 15</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.UUID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.defaultValues">
<tt class="descname">defaultValues</tt><em class="property"> = {0: '', 1: '', 2: '', 3: '', 4: -1, 5: -1, 7: -1, 8: -1, 9: -1.0, 10: -1.0, 11: '00000000', 12: '000000', 13: '00000000000000', 14: 0, 15: ''}</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.defaultValues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="json_to_relation.col_data_type.ColDataType.isinstance">
<em class="property">classmethod </em><tt class="descname">isinstance</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.isinstance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="json_to_relation.col_data_type.ColDataType.sqlTypeFromValue">
<em class="property">classmethod </em><tt class="descname">sqlTypeFromValue</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.sqlTypeFromValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a value, return the best fitting MySQL data type
Special case: None: we return TEXT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cls</strong> (<em>ColDataType</em>) &#8211; ColDataType, makes it a class method</li>
<li><strong>value</strong> (<em>{str | unicode | int | float | bool | None}</em>) &#8211; example value</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.col_data_type.ColDataType.strings">
<tt class="descname">strings</tt><em class="property"> = {0: 'VARCHAR(255)', 1: 'TEXT', 2: 'MEDIUMTEXT', 3: 'LONGTEXT', 4: 'TINYINT', 5: 'SMALLINT', 6: 'MEDIUMINT', 7: 'INT', 8: 'BIGINT', 9: 'FLOAT', 10: 'DOUBLE', 11: 'DATE', 12: 'TIME', 13: 'DATETIME', 14: 'BOOL', 15: 'VARCHAR(40)'}</em><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.strings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.col_data_type.ColDataType.toString">
<tt class="descname">toString</tt><big>(</big><em>val</em><big>)</big><a class="headerlink" href="#json_to_relation.col_data_type.ColDataType.toString" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.edxTrackLogJSONParser">
<span id="edxtracklogjsonparser-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">edxTrackLogJSONParser</span></tt> Module<a class="headerlink" href="#module-json_to_relation.edxTrackLogJSONParser" title="Permalink to this headline">¶</a></h2>
<p>Created on Oct 2, 2013</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">paepcke</td>
</tr>
</tbody>
</table>
<p>Modifications:</p>
<ul>
<li><p class="first">Dec 28, 2013  Col load_info_fk in EdxTrackEvent now properly typed to varchar(40) to match LoadInfo.load_info_id&#8217;s type uses REPLACE INTO, rather than INSERT INTO</p>
</li>
<li><p class="first">Dec 28, 2013 Fixed some epydoc comment format errors.</p>
</li>
<li><dl class="first docutils">
<dt>Dec 29, 2013: Caused the ALTER ENABLE KEYS section in the output .sql file</dt>
<dd><p class="first last">to be commented out. When loading multiple .sql files in a row,
these statements caused re-creation of indexes after each load,
adding significantly to the load time. Instead, manageEdxDb.py
handles the re-enabling. 
In pushDBCreations() pushed a header comment into the output .sql
file to warn about the commented-out ALTER ENABLE KEYS. The comment
advises to uncomment if loading manually, i.e. not via
manageEdxDb.py.</p>
</dd>
</dl>
</li>
</ul>
<dl class="class">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser">
<em class="property">class </em><tt class="descclassname">json_to_relation.edxTrackLogJSONParser.</tt><tt class="descname">EdXTrackLogJSONParser</tt><big>(</big><em>jsonToRelationConverter</em>, <em>mainTableName</em>, <em>logfileID=''</em>, <em>progressEvery=1000</em>, <em>replaceTables=False</em>, <em>dbName='test'</em>, <em>useDisplayNameCache=False</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#json_to_relation.generic_json_parser.GenericJSONParser" title="json_to_relation.generic_json_parser.GenericJSONParser"><tt class="xref py py-class docutils literal"><span class="pre">json_to_relation.generic_json_parser.GenericJSONParser</span></tt></a></p>
<p>Parser specialized for EdX track logs.</p>
<dl class="attribute">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.JSON_BAD_BACKSLASH_PATTERN">
<tt class="descname">JSON_BAD_BACKSLASH_PATTERN</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x29c9818&gt;</em><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.JSON_BAD_BACKSLASH_PATTERN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.anonymizeUser">
<tt class="descname">anonymizeUser</tt><big>(</big><em>screenName</em>, <em>email</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.anonymizeUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a user hash, using email if available,
else the screenName. (Sometimes either email or screenName are empty)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>screenName</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; user screen name in system</li>
<li><strong>email</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; user email address</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">40 byte hash</p>
</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: string</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createAccountTable">
<tt class="descname">createAccountTable</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createAccountTable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createAnswerTable">
<tt class="descname">createAnswerTable</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createAnswerTable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createCSVTableLoadCommands">
<tt class="descname">createCSVTableLoadCommands</tt><big>(</big><em>outputDisposition</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createCSVTableLoadCommands" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a series of LOAD INFILE commands as a string. One load command
for each of the Edx track log tables.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>outputDisposition</strong> (<em>OutputDisposition</em>) &#8211; an OutputDisposition that offers a method getCSVTableOutFileName(tableName),
which provides the fully qualified file name that is the 
destination for CSV rows destined for a given table.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createCorrectMapTable">
<tt class="descname">createCorrectMapTable</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createCorrectMapTable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createInputStateTable">
<tt class="descname">createInputStateTable</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createInputStateTable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createLoadInfoTable">
<tt class="descname">createLoadInfoTable</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createLoadInfoTable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createMainTable">
<tt class="descname">createMainTable</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createMainTable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createMergeAccountTbl">
<tt class="descname">createMergeAccountTbl</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createMergeAccountTbl" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the very end of a load: copies all the entries
from the temporary Account table in the Edx db to the permanent
Account table in EdxPrivate. Then DROPs the tmp Account table:</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createStateTable">
<tt class="descname">createStateTable</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.createStateTable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.ensureArray">
<tt class="descname">ensureArray</tt><big>(</big><em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.ensureArray" title="Permalink to this definition">¶</a></dt>
<dd><p>If event is either a Python array, or a string with an array
definition inside, returns the array. Else returns None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.ensureDict">
<tt class="descname">ensureDict</tt><big>(</big><em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.ensureDict" title="Permalink to this definition">¶</a></dt>
<dd><p>If event is either a dict, or a string with a dict
definition inside, returns a dict. Else returns None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.extractCanonicalCourseName">
<tt class="descname">extractCanonicalCourseName</tt><big>(</big><em>trackLogStr</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.extractCanonicalCourseName" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string believed to be the best course name
snippet from a log entry, use the modulestoreImporter&#8217;s
facilities to get a canonical name. Inputs look like:</p>
<div class="highlight-python"><pre>Medicine/HRP258/Statistics_in_Medicine
/courses/Education/EDUC115N/How_to_Learn_Math/modx/i4x://Education/EDUC115N/sequential/1b3ac347ca064b3eaaddbc27d4200964/goto_position</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>trackLogStr</strong> (<em>String</em>) &#8211; string that hopefully contains a course short name</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a string of the form org/courseShortName/courseTitle, or None if no course name 
could be found in the given string.</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {String | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.extractCourseIDFromProblemXEvent">
<tt class="descname">extractCourseIDFromProblemXEvent</tt><big>(</big><em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.extractCourseIDFromProblemXEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the &#8216;event&#8217; field of an event of type problem_check, problem_check_fail, problem_save...,
extract the course ID. Ex from save_problem_check:</p>
<div class="highlight-python"><pre>"event": {"success": "correct", "correct_map": {"i4x-Medicine-HRP258-problem-8dd11b4339884ab78bc844ce45847141_2_1": {"hint": "", "hintmode": null,...</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.extractOpenEdxHash">
<tt class="descname">extractOpenEdxHash</tt><big>(</big><em>idStr</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.extractOpenEdxHash" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Given a string, such as::</dt>
<dd>i4x-Medicine-HRP258-videoalpha-7cd4bf0813904612bcd583a73ade1d54
or:
input_i4x-Medicine-HRP258-problem-98ca37dbf24849debcc29eb36811cb68_3_1_choice_3&#8217;</dd>
</dl>
<p>extract and return the 32 bit hash portion. If none is found,
return None. Method takes any string and finds a 32 bit hex number.
It is up to the caller to ensure that the return is meaningful. As
a minimal check, the method does ensure that there is at most one 
qualifying string present; we know that this is the case with problem_id
and other strings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>idStr</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; problem, module, video ID and others that might contain a 32 bit OpenEdx platform hash</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.extractShortCourseID">
<tt class="descname">extractShortCourseID</tt><big>(</big><em>fullCourseStr</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.extractShortCourseID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.findHashPattern">
<tt class="descname">findHashPattern</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x29c9988&gt;</em><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.findHashPattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.finish">
<tt class="descname">finish</tt><big>(</big><em>includeCSVLoadCommands=False</em>, <em>outputDisposition=None</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.finish" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by json_to_relation parent after 
the last insert for one file is done.
We do what&#8217;s needed to close out the transform.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>includeCSVLoadCommands</strong> (<em>Boolean</em>) &#8211; if True, then the main output file will just have
table locking, and turning off consistency checks. In that case we
insert CSV file load statements. Otherwise the output file already
has INSERT statements, and we just add table unlocking, etc.:</li>
<li><strong>outputDisposition</strong> (<em>OutputDisposition</em>) &#8211; an OutputDisposition that offers a method getCSVTableOutFileName(tableName),
which provides the fully qualified file name that is the 
destination for CSV rows destined for a given table.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.fixOneJSONBackslashProblem">
<tt class="descname">fixOneJSONBackslashProblem</tt><big>(</big><em>matchObj</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.fixOneJSONBackslashProblem" title="Permalink to this definition">¶</a></dt>
<dd><p>Called from the pattern.sub() method in makeJSONSafe for
each match of a bad backslash in jsonStr there. Returns
the replacement string to use by the caller for the substitution. 
Ex. a match received from the original string &#8220;d&#8217;Orsay&#8221; returns
&#8220;d&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>matchObj</strong> (<em>Match</em>) &#8211; a Match object resulting from a regex search/replace
call.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.genOneCreateStatement">
<tt class="descname">genOneCreateStatement</tt><big>(</big><em>tableName</em>, <em>schemaDict</em>, <em>primaryKeyName=None</em>, <em>foreignKeyColNames=None</em>, <em>autoincrement=False</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.genOneCreateStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a table name and its ordered schema dict, generate
a basic SQL CREATE TABLE statement. Primary and foreign key names may
optionally be provided. An example of the most complex create statement generated
by this method is::
CREATE TABLE myTable</p>
<blockquote>
<div><dl class="docutils">
<dt>col1 VARCHAR(40) NOT NULL Primary Key,</dt>
<dd><blockquote class="first">
<div>col2 TEXT,
col3 INT,
col4 VARCHAR(32),
FOREIGN KEY(col3) REFERENCES OtherTable(int_col_name_there),
FOREIGN KEY(col4) REFERENCES YetOtherTable(varchar_col_name_there),
);</div></blockquote>
<p>Example for the optional foreign key specification parameter
that would create the above example::
{&#8216;OtherTable&#8217; : (&#8216;col3&#8217;, &#8216;int_col_name_there&#8217;),</p>
<blockquote class="last">
<div>&#8216;YetOtherTable : (&#8216;col4&#8217;, &#8216;varchar_col_name_there&#8217;)
}</div></blockquote>
</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tableName</strong> (<em>String</em>) &#8211; name of table to be created</li>
<li><strong>schemaDict</strong> (<em>Dict&lt;String,ColumnSpec&gt;</em>) &#8211; dict mapping column names to ColumnSpec objects</li>
<li><strong>primaryKeyName</strong> (<em>String</em>) &#8211; name of the primary key column, if any</li>
<li><strong>foreignKeyColNames</strong> (<em>Dict&lt;String,(String,String)&gt;</em>) &#8211; dict mapping foreign table names to tuples (localColName, foreignColName)</li>
<li><strong>autoincrement</strong> (<em>Boolean</em>) &#8211; whether this table&#8217;s primary key is autoincrement</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.getCourseDisplayName">
<tt class="descname">getCourseDisplayName</tt><big>(</big><em>fullCourseName</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.getCourseDisplayName" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fullCourseName</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.getUniqueID">
<tt class="descname">getUniqueID</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.getUniqueID" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a universally unique key with
all characters being legal in MySQL identifiers.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.getZipAndCountryFromMailAddr">
<tt class="descname">getZipAndCountryFromMailAddr</tt><big>(</big><em>mailAddr</em>, <em>accountDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.getZipAndCountryFromMailAddr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.get_course_id">
<tt class="descname">get_course_id</tt><big>(</big><em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.get_course_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a &#8216;pythonized&#8217; JSON tracking event object, find
the course URL, and extract the course name from it.
A number of different events occur, which do not contain
course IDs: server heartbeats, account creation, dashboard
accesses. Among them are logins, which look like this:</p>
<div class="highlight-python"><pre>{"username": "", 
 "host": "class.stanford.edu", 
 "event_source": "server", 
 "event_type": "/accounts/login", 
 "time": "2013-06-14T00:31:57.661338", 
 "ip": "98.230.189.66", 
 "event": "{
            "POST": {}, 
            "GET": {
                 "next": ["/courses/Medicine/HRP258/Statistics_in_Medicine/courseware/80160e.../"]}}", 
 "agent": "Mozilla/5.0 (Windows NT 5.1; rv:21.0) Gecko/20100101
 Firefox/21.0", 
 "page": null
 }</pre>
</div>
<dl class="docutils">
<dt>But also::</dt>
<dd><dl class="first docutils">
<dt>{&#8220;username&#8221;: &#8220;RobbieH&#8221;, </dt>
<dd>&#8220;host&#8221;: &#8220;class.stanford.edu&#8221;,</dd>
</dl>
<p class="last">...
&#8220;event&#8221;: {&#8220;failure&#8221;: &#8220;closed&#8221;, &#8220;state&#8221;: {&#8220;student_answers&#8221;: {&#8220;i4x-Medicine-HRP258-problem-4cd47ea861f542488a20691ac424a002_7_1&#8221;: &#8220;choice_1&#8221;, &#8220;i4x-Medicine-HRP258-problem-4cd47ea861f542488a20691ac424a002_2_1&#8221;: &#8220;choice_3&#8221;, &#8220;i4x-Medicine-HRP258-problem-4cd47ea861f542488a20691ac424a002_9_1&#8221;: [&#8220;choice_0&#8221;, &#8220;choice_1&#8221;], &#8220;i4x-Medicine-HRP258-problem-4cd47ea861f542488a20691ac424a002_6_1&#8221;: &#8220;choice_0&#8221;, &#8220;i4x-Medicine-HRP258-problem-4cd47ea861f542488a20691ac424a002_8_1&#8221;: [&#8220;choice_0&#8221;, &#8220;choice_1&#8221;, &#8220;choice_2&#8221;, &#8220;choice_3&#8221;, &#8220;choice_4&#8221;],</p>
</dd>
</dl>
<p>Notice the &#8216;event&#8217; key&#8217;s value being a <em>string</em> containing JSON, rather than 
a nested JSON object. This requires special attention. Buried inside
that string is the &#8216;next&#8217; tag, whose value is an array with a long (here
partially elided) hex number. This is where the course number is
extracted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> (<em>Dict&lt;String,Dict&lt;&lt;any&gt;&gt;</em>) &#8211; JSON record of an edx tracking event as internalized dict</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">two-tuple: full name of course in which event occurred, and descriptive name.
None if course ID could not be obtained.</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {(String,String) | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleAddRemoveInstructor">
<tt class="descname">handleAddRemoveInstructor</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleAddRemoveInstructor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleAddRemoveUserGroup">
<tt class="descname">handleAddRemoveUserGroup</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleAddRemoveUserGroup" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>This event looks like this::</dt>
<dd><dl class="first last docutils">
<dt>{&#8220;event_name&#8221;: &#8220;beta-tester&#8221;, </dt>
<dd>&#8220;user&#8221;: &#8220;smith&#8221;, 
&#8220;event&#8221;: &#8220;add&#8221;}</dd>
</dl>
</dd>
</dl>
<p>Note that the &#8216;user&#8217; is different from the screen_name. The latter triggered
the event. User is the group member being talked about. For clarity,
&#8216;user&#8217; is called &#8216;group_user&#8217;, and &#8216;event&#8217; is called &#8216;group_event&#8217; in the
main table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleAjaxLogin">
<tt class="descname">handleAjaxLogin</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em>, <em>eventType</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleAjaxLogin" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Events look like this::</dt>
<dd>&#8220;{&#8220;POST&#8221;: {&#8220;password&#8221;: &#8220;<strong>****</strong>&#8221;, &#8220;email&#8221;: [&#8220;<a class="reference external" href="mailto:emil&#46;smith&#37;&#52;&#48;gmail&#46;com">emil<span>&#46;</span>smith<span>&#64;</span>gmail<span>&#46;</span>com</a>&#8220;], &#8220;remember&#8221;: [&#8220;true&#8221;]}, &#8220;GET&#8221;: {}}&#8221;</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
<li><strong>eventType</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleBadJSON">
<tt class="descname">handleBadJSON</tt><big>(</big><em>row</em>, <em>offendingText</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleBadJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>When JSON parsing fails, place the offending text into 
longAnswer. Happens, for instance, when student answers have embedded
quotes that confused some upstream load process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>offendingText</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleBook">
<tt class="descname">handleBook</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleBook" title="Permalink to this definition">¶</a></dt>
<dd><p>No example of book available</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleCommonFields">
<tt class="descname">handleCommonFields</tt><big>(</big><em>record</em>, <em>row</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleCommonFields" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleCreateAccount">
<tt class="descname">handleCreateAccount</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleCreateAccount" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get event structure like this (fictitious values)::</dt>
<dd><dl class="first last docutils">
<dt>&#8220;{&#8220;POST&#8221;: {&#8220;username&#8221;: [&#8220;luisXIV&#8221;], </dt>
<dd>&#8220;name&#8221;: [&#8220;Roy Luigi Cannon&#8221;], 
&#8220;mailing_address&#8221;: [&#8220;3208 Dead StrnParis, GA 30243&#8221;], 
&#8220;gender&#8221;: [&#8220;f&#8221;], 
&#8220;year_of_birth&#8221;: [&#8220;1986&#8221;], 
&#8220;level_of_education&#8221;: [&#8220;p&#8221;], 
&#8220;goals&#8221;: [&#8220;flexibility, cost, &#8216;prestige&#8217; and course of study&#8221;], 
&#8220;honor_code&#8221;: [&#8220;true&#8221;], 
&#8220;terms_of_service&#8221;: [&#8220;true&#8221;], 
&#8220;course_id&#8221;: [&#8220;Medicine/HRP258/Statistics_in_Medicine&#8221;], 
&#8220;password&#8221;: &#8220;<strong>****</strong>&#8221;, 
&#8220;enrollment_action&#8221;: [&#8220;enroll&#8221;], 
&#8220;email&#8221;: [&#8220;<a class="reference external" href="mailto:luig&#46;cannon&#37;&#52;&#48;yahoo&#46;com">luig<span>&#46;</span>cannon<span>&#64;</span>yahoo<span>&#46;</span>com</a>&#8220;]}, &#8220;GET&#8221;: {}}&#8221;</dd>
</dl>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleDeleteStateRescoreSubmission">
<tt class="descname">handleDeleteStateRescoreSubmission</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleDeleteStateRescoreSubmission" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleForumManipulations">
<tt class="descname">handleForumManipulations</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleForumManipulations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleFullscreen">
<tt class="descname">handleFullscreen</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleFullscreen" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Events look like this::</dt>
<dd>&#8220;{&#8220;id&#8221;:&#8221;i4x-Medicine-HRP258-videoalpha-4b200d3944cc47e5ae3ad142c1006075&#8221;,&#8221;code&#8221;:&#8221;html5&#8221;,&#8221;currentTime&#8221;:348.4132080078125}&#8221;</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleGetStudentProgressPage">
<tt class="descname">handleGetStudentProgressPage</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleGetStudentProgressPage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleListForumMatters">
<tt class="descname">handleListForumMatters</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleListForumMatters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleNotFullscreen">
<tt class="descname">handleNotFullscreen</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleNotFullscreen" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Events look like this::</dt>
<dd>&#8220;{&#8220;id&#8221;:&#8221;i4x-Medicine-HRP258-videoalpha-c5cbefddbd55429b8a796a6521b9b752&#8221;,&#8221;code&#8221;:&#8221;html5&#8221;,&#8221;currentTime&#8221;:661.1010131835938}&#8221;</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleOEFeedbackResponseSelected">
<tt class="descname">handleOEFeedbackResponseSelected</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleOEFeedbackResponseSelected" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a event string like this::
&#8220;event&#8221;: &#8220;{&#8220;value&#8221;:&#8221;5&#8221;}&#8221;
After JSON import into Python:
{u&#8217;value&#8217;: u&#8216;5&#8217;}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleOEShowFeedback">
<tt class="descname">handleOEShowFeedback</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleOEShowFeedback" title="Permalink to this definition">¶</a></dt>
<dd><p>All examples seen as of this writing had this field empty: &#8220;{}&#8221;</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handlePathStyledEventTypes">
<tt class="descname">handlePathStyledEventTypes</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handlePathStyledEventTypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when an event type is a long path-like string.
Examples:</p>
<div class="highlight-python"><pre>/courses/OpenEdX/200/Stanford_Sandbox/modx/i4x://OpenEdX/200/combinedopenended/5fb3b40e76a14752846008eeaca05bdf/check_for_score
/courses/Education/EDUC115N/How_to_Learn_Math/modx/i4x://Education/EDUC115N/peergrading/ef6ba7f803bb46ebaaf008cde737e3e9/is_student_calibrated",
/courses/Education/EDUC115N/How_to_Learn_Math/courseware</pre>
</div>
<p>Most have action instructions at the end, some don&#8217;t. The ones that don&#8217;t 
have no additional information. We drop those events.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemCheck">
<tt class="descname">handleProblemCheck</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemCheck" title="Permalink to this definition">¶</a></dt>
<dd><p>The problem_check event comes in two flavors (assertained by observation):
The most complex is this one:</p>
<div class="highlight-python"><pre>  {       
    "success": "correct",
    "correct_map": {
        "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1": {
            "hint": "",
            "hintmode": null,
            "correctness": "correct",
            "msg": "",
            "npoints": null,
            "queuestate": null
        },
        "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1": {
            "hint": "",
            "hintmode": null,
            "correctness": "correct",
            "msg": "",
            "npoints": null,
            "queuestate": null
        }
    },
    "attempts": 2,
    "answers": {
        "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1": "choice_0",
        "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1": "choice_3"
    },
    "state": {
        "student_answers": {
            "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1": "choice_3",
            "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1": "choice_1"
        },
        "seed": 1,
        "done": true,
        "correct_map": {
            "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1": {
                "hint": "",
                "hintmode": null,
                "correctness": "incorrect",
                "msg": "",
                "npoints": null,
                "queuestate": null
            },
            "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1": {
                "hint": "",
                "hintmode": null,
                "correctness": "incorrect",
                "msg": "",
                "npoints": null,
                "queuestate": null
            }
        },
        "input_state": {
            "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1": {},
            "i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1": {}
        }
    },
    "problem_id": "i4x://Medicine/HRP258/problem/e194bcb477104d849691d8b336b65ff6"
  }
  
The simpler version is like this, in which the answers are styled as HTTP GET parameters::
  {"username": "smitch", 
   "host": "class.stanford.edu", 
   "session": "75a8c9042ba10156301728f61e487414", 
   "event_source": "browser", 
   "event_type": "problem_check", 
   "time": "2013-08-04T06:27:13.660689+00:00", 
   "ip": "66.172.116.216", 
   "event": ""input_i4x-Medicine-HRP258-problem-7451f8fe15a642e1820767db411a4a3e_2_1=choice_2&amp;
               input_i4x-Medicine-HRP258-problem-7451f8fe15a642e1820767db411a4a3e_3_1=choice_2"", 
   "agent": "Mozilla/5.0 (Windows NT 6.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.95 Safari/537.36", 
   "page": "https://class.stanford.edu/courses/Medicine/HRP258/Statistics_in_Medicine/courseware/de472d1448a74e639a41fa584c49b91e/ed52812e4f96445383bfc556d15cb902/"
   }            </pre>
</div>
<p>We handle the complex version here, but call problemCheckSimpleCase() 
for the simple case.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param record:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemCheckFail">
<tt class="descname">handleProblemCheckFail</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemCheckFail" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Gets events like this::</dt>
<dd><dl class="first docutils">
<dt>{</dt>
<dd><p class="first">&#8220;failure&#8221;: &#8220;unreset&#8221;,
&#8220;state&#8221;: {</p>
<blockquote>
<div><dl class="docutils">
<dt>&#8220;student_answers&#8221;: {</dt>
<dd>&#8220;i4x-Education-EDUC115N-problem-ab38a55d2eb145ae8cec26acebaca27f_2_1&#8221;: &#8220;choice_0&#8221;</dd>
</dl>
<p>},
&#8220;seed&#8221;: 89,
&#8220;done&#8221;: true,
&#8220;correct_map&#8221;: {</p>
<blockquote>
<div><dl class="docutils">
<dt>&#8220;i4x-Education-EDUC115N-problem-ab38a55d2eb145ae8cec26acebaca27f_2_1&#8221;: {</dt>
<dd>&#8220;hint&#8221;: &#8220;&#8221;,
&#8220;hintmode&#8221;: null,
&#8220;correctness&#8221;: &#8220;correct&#8221;,
&#8220;msg&#8221;: &#8220;&#8221;,
&#8220;npoints&#8221;: null,
&#8220;queuestate&#8221;: null</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>},
&#8220;input_state&#8221;: {</p>
<blockquote>
<div><p>&#8220;i4x-Education-EDUC115N-problem-ab38a55d2eb145ae8cec26acebaca27f_2_1&#8221;: {</p>
<p>}</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>},
&#8220;problem_id&#8221;: &#8220;i4x://Education/EDUC115N/problem/ab38a55d2eb145ae8cec26acebaca27f&#8221;,
&#8220;answers&#8221;: {</p>
<blockquote>
<div>&#8220;i4x-Education-EDUC115N-problem-ab38a55d2eb145ae8cec26acebaca27f_2_1&#8221;: &#8220;choice_0&#8221;</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemCheckSimpleCase">
<tt class="descname">handleProblemCheckSimpleCase</tt><big>(</big><em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemCheckSimpleCase" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the simple case of problem_check type events. 
Their event field has this form:</p>
<div class="highlight-python"><pre>"event": ""input_i4x-Medicine-HRP258-problem-7451f8fe15a642e1820767db411a4a3e_2_1=choice_2&amp;
            input_i4x-Medicine-HRP258-problem-7451f8fe15a642e1820767db411a4a3e_3_1=choice_2"", </pre>
</div>
<p>The problems and proposed solutions are styled like HTTP GET request parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemGraded">
<tt class="descname">handleProblemGraded</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemGraded" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Events look like this::</dt>
<dd>&#8216;[...#8217;t improve or get worse. Calculate the 95% confidence interval for the true proportion of heart disease patients who improve their fitness using this particular exercise regimen. Recall that proportions are normally distributed with a standard error of &lt;/p&gt;&lt;p&gt;\[ \sqrt{\frac{p(1-p)}{n}} \]&lt;/p&gt;&lt;p&gt;(You may use the observed proportion to calculate the standard error.)&lt;/p&gt;&lt;span&gt;&lt;form class=&#8221;choicegroup capa_inputtype&#8221; id=&#8221;inputtype_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1&#8221;&gt;&lt;div class=&#8221;indicator_container&#8221;&gt;n    &lt;/div&gt;&lt;fieldset&gt;&lt;label for=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1_choice_0&#8221;&gt;&lt;input type=&#8221;radio&#8221; name=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1&#8221; id=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1_choice_0&#8221; aria-describedby=&#8221;answer_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1&#8221; value=&#8221;choice_0&#8221;/&gt; 66%nn        &lt;/label&gt;&lt;label for=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1_choice_1&#8221;&gt;&lt;input type=&#8221;radio&#8221; name=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1&#8221; id=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1_choice_1&#8221; aria-describedby=&#8221;answer_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1&#8221; value=&#8221;choice_1&#8221;/&gt; 66%-70%nn        &lt;/label&gt;&lt;label for=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1_choice_2&#8221; class=&#8221;choicegroup_correct&#8221;&gt;&lt;input type=&#8221;radio&#8221; name=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1&#8221; id=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1_choice_2&#8221; aria-describedby=&#8221;answer_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1&#8221; value=&#8221;choice_2&#8221; checked=&#8221;true&#8221;/&gt; 50%-84%nn            n            &lt;span class=&#8221;sr&#8221; aria-describedby=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1_choice_2&#8221;&gt;Status: correct&lt;/span&gt;n        &lt;/label&gt;&lt;label for=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1_choice_3&#8221;&gt;&lt;input type=&#8221;radio&#8221; name=&#8221;input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_1&#8221; id=&#8221;<a href="#id1"><span class="problematic" id="id2">input_i4x-Medicine-HRP258-problem-fc217b7c689a40938dd55ebc44cb6f9a_4_</span></a>...        
]&#8217;</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemRescore">
<tt class="descname">handleProblemRescore</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemRescore" title="Permalink to this definition">¶</a></dt>
<dd><p>No example available
Fields: state, problemID, orig_score (int), orig_total(int), new_score(int),
new_total(int), correct_map, success (string &#8216;correct&#8217; or &#8216;incorrect&#8217;), and
attempts(int)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemRescoreFail">
<tt class="descname">handleProblemRescoreFail</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemRescoreFail" title="Permalink to this definition">¶</a></dt>
<dd><p>No example available. Records reportedly include:
state, problem_id, and failure reason</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemReset">
<tt class="descname">handleProblemReset</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemReset" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Gets a event string like this::</dt>
<dd>&#8220;{&#8220;POST&#8221;: {&#8220;id&#8221;: [&#8220;i4x://Engineering/EE222/problem/e68cfc1abc494dfba585115792a7a750&#64;draft&#8221;]}, &#8220;GET&#8221;: {}}&#8221;</dd>
<dt>After turning this JSON into Python::</dt>
<dd>{u&#8217;POST&#8217;: {u&#8217;id&#8217;: [u&#8217;i4x://Engineering/EE222/problem/e68cfc1abc494dfba585115792a7a750&#64;draft&#8217;]}, u&#8217;GET&#8217;: {}}</dd>
<dt>Or the event could be simpler, like this::</dt>
<dd>u&#8217;input_i4x-Engineering-QMSE01-problem-dce5fe9e04be4bc1932efb05a2d6db68_2_1=2&#8217;</dd>
</dl>
<p>In the latter case we just put that string into the problemID field
of the main table</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemSave">
<tt class="descname">handleProblemSave</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemSave" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Gets a event string like this::</dt>
<dd><dl class="first last docutils">
<dt>&#8220;&#8221;input_i4x-Medicine-HRP258-problem-44c1ef4e92f648b08adbdcd61d64d558_2_1=13.4&amp;</dt>
<dd>input_i4x-Medicine-HRP258-problem-44c1ef4e92f648b08adbdcd61d64d558_3_1=2.49&amp;
input_i4x-Medicine-HRP258-problem-44c1ef4e92f648b08adbdcd61d64d558_4_1=13.5&amp;
input_i4x-Medicine-HRP258-problem-44c1ef4e92f648b08adbdcd61d64d558_5_1=3&#8221;&#8220;</dd>
</dl>
</dd>
</dl>
<p>After splitting this string on &#8216;&amp;&#8217;, and then each result on &#8216;=&#8217;, we add the 
problemID/solution pairs to the Answer table:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemShow">
<tt class="descname">handleProblemShow</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleProblemShow" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Gets a event string like this::</dt>
<dd>&#8220;{&#8220;problem&#8221;:&#8221;i4x://Medicine/HRP258/problem/c5cf8f02282544729aadd1f9c7ccbc87&#8221;}&#8221;</dd>
</dl>
<p>After turning this JSON into Python::
{u&#8217;problem&#8217;: u&#8217;i4x://Medicine/HRP258/problem/c5cf8f02282544729aadd1f9c7ccbc87&#8217;}</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handlePsychometricsHistogramGen">
<tt class="descname">handlePsychometricsHistogramGen</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handlePsychometricsHistogramGen" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleQuestionProblemHidingShowing">
<tt class="descname">handleQuestionProblemHidingShowing</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleQuestionProblemHidingShowing" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a event string like this::
&#8220;{&#8220;location&#8221;:&#8221;i4x://Education/EDUC115N/combinedopenended/c8af7daea1f54436b0b25930b1631845&#8221;}&#8221;
After importing from JSON into Python::
{u&#8217;location&#8217;: u&#8217;i4x://Education/EDUC115N/combinedopenended/c8af7daea1f54436b0b25930b1631845&#8217;}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleReceiveEmail">
<tt class="descname">handleReceiveEmail</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleReceiveEmail" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Event is something like this::</dt>
<dd>{&#8220;course&#8221;: &#8220;Medicine/SciWrite/Fall2013&#8221;, &#8220;receive_emails&#8221;: &#8220;yes&#8221;}</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleRescoreReset">
<tt class="descname">handleRescoreReset</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleRescoreReset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleResetProblem">
<tt class="descname">handleResetProblem</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleResetProblem" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Events look like this::</dt>
<dd><dl class="first last docutils">
<dt>{&#8220;old_state&#8221;: </dt>
<dd><blockquote class="first">
<div><dl class="docutils">
<dt>{&#8220;student_answers&#8221;: {&#8220;i4x-HMC-MyCS-problem-d457165577d34e5aac6fbb55c8b7ad33_2_1&#8221;: &#8220;choice_2&#8221;}, </dt>
<dd><p class="first">&#8220;seed&#8221;: 811, 
&#8220;done&#8221;: true, 
&#8220;correct_map&#8221;: {&#8220;i4x-HMC-MyCS-problem-d457165577d34e5aac6fbb55c8b7ad33_2_1&#8221;: {&#8220;hint&#8221;: &#8220;&#8221;,</p>
<blockquote class="last">
<div><blockquote>
<div>&#8220;hintmode&#8221;: null, 
...</div></blockquote>
<p>}},</p>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p class="last">&#8220;problem_id&#8221;: &#8220;i4x://HMC/MyCS/problem/d457165577d34e5aac6fbb55c8b7ad33&#8221;, 
&#8220;new_state&#8221;: {&#8220;student_answers&#8221;: {}, &#8220;seed&#8221;: 93, &#8220;done&#8221;: false, &#8220;correct_map&#8221;: {}, &#8220;input_state&#8221;: {&#8220;i4x-HMC-MyCS-problem-d457165577d34e5aac6fbb55c8b7ad33_2_1&#8221;: {}}}}</p>
</dd>
</dl>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleResetStudentAttempts">
<tt class="descname">handleResetStudentAttempts</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleResetStudentAttempts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleRubricSelect">
<tt class="descname">handleRubricSelect</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleRubricSelect" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a event string like this::
&#8220;{&#8220;location&#8221;:&#8221;i4x://Education/EDUC115N/combinedopenended/4abb8b47b03d4e3b8c8189b3487f4e8d&#8221;,&#8221;selection&#8221;:&#8221;1&#8221;,&#8221;category&#8221;:0}&#8221;
{u&#8217;category&#8217;: 0, u&#8217;selection&#8217;: u&#8216;1&#8217;, u&#8217;location&#8217;: u&#8217;i4x://Education/EDUC115N/combinedopenended/4abb8b47b03d4e3b8c8189b3487f4e8d&#8217;}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleSaveProblemFailSuccessCheckOrReset">
<tt class="descname">handleSaveProblemFailSuccessCheckOrReset</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleSaveProblemFailSuccessCheckOrReset" title="Permalink to this definition">¶</a></dt>
<dd><p>Do have examples. event has fields state, problem_id, failure, and answers.
For save_problem_success or save_problem_check there is no failure field</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleSeqNav">
<tt class="descname">handleSeqNav</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em>, <em>eventType</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleSeqNav" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Video navigation. Events look like this::</dt>
<dd><dl class="first last docutils">
<dt>{&#8220;username&#8221;: &#8220;BetaTester1&#8221;, </dt>
<dd>&#8220;host&#8221;: &#8220;class.stanford.edu&#8221;, 
&#8220;session&#8221;: &#8220;009e5b5e1bd4ab5a800cafc48bad9e44&#8221;, 
&#8220;event_source&#8221;: &#8220;browser&#8221;, &#8221;
event_type&#8221;: &#8220;seq_goto&#8221;, 
&#8220;time&#8221;: &#8220;2013-06-08T23:29:58.346222&#8221;, 
&#8220;ip&#8221;: &#8220;24.5.14.103&#8221;, 
&#8220;event&#8221;: &#8220;{&#8220;old&#8221;:2,&#8221;new&#8221;:1,&#8221;id&#8221;:&#8221;i4x://Medicine/HRP258/sequential/53b0357680d24191a60156e74e184be3&#8221;}&#8221;, 
&#8220;agent&#8221;: &#8220;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:21.0) Gecko/20100101 Firefox/21.0&#8221;, 
&#8220;page&#8221;: &#8220;https://class.stanford.edu/courses/Medicine/HRP258/Statistics_in_Medicine/courseware/ac6d006c4bc84fc1a9cec412734fd5ca/53b0357680d24191a60156e74e184be3/&#8221;
}</dd>
</dl>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
<li><strong>eventType</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleShowAnswer">
<tt class="descname">handleShowAnswer</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleShowAnswer" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a event string like this::
{&#8220;problem_id&#8221;: &#8220;i4x://Medicine/HRP258/problem/28b525192c4e43daa148dc7308ff495e&#8221;}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleShowHideTranscript">
<tt class="descname">handleShowHideTranscript</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleShowHideTranscript" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Events look like this::</dt>
<dd><dl class="first last docutils">
<dt>&#8220;{&#8220;id&#8221;:&#8221;i4x-Medicine-HRP258-videoalpha-c26e4247f7724cc3bc407a7a3541ed90&#8221;,</dt>
<dd>&#8220;code&#8221;:&#8221;q3cxPJGX4gc&#8221;,
&#8220;currentTime&#8221;:0}&#8221;</dd>
</dl>
</dd>
</dl>
<p>Same for hide_transcript</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> &#8211; </li>
<li><strong>row</strong> &#8211; </li>
<li><strong>event</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleVideoPlayPause">
<tt class="descname">handleVideoPlayPause</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleVideoPlayPause" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>For play_video, event looks like this::</dt>
<dd>&#8220;{&#8220;id&#8221;:&#8221;i4x-Education-EDUC115N-videoalpha-c41e588863ff47bf803f14dec527be70&#8221;,&#8221;code&#8221;:&#8221;html5&#8221;,&#8221;currentTime&#8221;:0}&#8221;</dd>
<dt>For pause_video::</dt>
<dd>&#8220;{&#8220;id&#8221;:&#8221;i4x-Education-EDUC115N-videoalpha-c5f2fd6ee9784df0a26984977658ad1d&#8221;,&#8221;code&#8221;:&#8221;html5&#8221;,&#8221;currentTime&#8221;:124.017784}&#8221;</dd>
<dt>For load_video::</dt>
<dd>&#8220;{&#8220;id&#8221;:&#8221;i4x-Education-EDUC115N-videoalpha-003bc44b4fd64cb79cdfd459e93a8275&#8221;,&#8221;code&#8221;:&#8221;4GlF1t_5EwI&#8221;}&#8221;</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleVideoSeek">
<tt class="descname">handleVideoSeek</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleVideoSeek" title="Permalink to this definition">¶</a></dt>
<dd><p>For play_video, event looks like this::
&#8220;{&#8220;id&#8221;:&#8221;i4x-Medicine-HRP258-videoalpha-413d6a45b82848339ab5fd3836dfb928&#8221;,</p>
<blockquote>
<div>&#8220;code&#8221;:&#8221;html5&#8221;,
&#8220;old_time&#8221;:308.506103515625,
&#8220;new_time&#8221;:290,
&#8220;type&#8221;:&#8221;slide_seek&#8221;}&#8221;</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleVideoSpeedChange">
<tt class="descname">handleVideoSpeedChange</tt><big>(</big><em>record</em>, <em>row</em>, <em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.handleVideoSpeedChange" title="Permalink to this definition">¶</a></dt>
<dd><p>Events look like this::
&#8220;{&#8220;id&#8221;:&#8221;i4x-Medicine-HRP258-videoalpha-7cd4bf0813904612bcd583a73ade1d54&#8221;,</p>
<blockquote>
<div>&#8220;code&#8221;:&#8221;html5&#8221;,
&#8220;currentTime&#8221;:1.6694719791412354,
&#8220;old_speed&#8221;:&#8221;1.50&#8221;,
&#8220;new_speed&#8221;:&#8221;2.0&#8221;}&#8221;</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.hashGeneral">
<tt class="descname">hashGeneral</tt><big>(</big><em>username</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.hashGeneral" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a ripemd160 40 char hash of the given name. Uses the
corresponding class method below.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>username</strong> (<em>String</em>) &#8211; name to be hashed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">hashed equivalent. Calling this function multiple times returns the same string</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.hexGE32Digits">
<tt class="descname">hexGE32Digits</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x29c98d0&gt;</em><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.hexGE32Digits" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.makeHash">
<em class="property">classmethod </em><tt class="descname">makeHash</tt><big>(</big><em>username</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.makeHash" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a ripemd160 40 char hash of the given name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>username</strong> (<em>String</em>) &#8211; name to be hashed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">hashed equivalent. Calling this function multiple times returns the same string</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.makeInsertSafe">
<tt class="descname">makeInsertSafe</tt><big>(</big><em>unsafeStr</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.makeInsertSafe" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes the given string safe for use as a value in a MySQL INSERT
statement. Looks for embedded CR or LFs, and turns them into 
semicolons. Escapes commas and single quotes. Backslash is
replaced by double backslash. This is needed for unicode, like
5 (invented example)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>unsafeStr</strong> (<em>String</em>) &#8211; string that possibly contains unsafe chars</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">same string, with unsafe chars properly replaced or escaped</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.makeJSONSafe">
<tt class="descname">makeJSONSafe</tt><big>(</big><em>jsonStr</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.makeJSONSafe" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a JSON string, make it safe for loading via
json.loads(). Backslashes before chars other than 
any of fnrtu/ are escaped with a second backslash</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jsonStr</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.problemGradedComplexPattern">
<tt class="descname">problemGradedComplexPattern</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x274c710&gt;</em><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.problemGradedComplexPattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.problemXFindCourseID">
<tt class="descname">problemXFindCourseID</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x29cc6c0&gt;</em><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.problemXFindCourseID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.processOneJSONObject">
<tt class="descname">processOneJSONObject</tt><big>(</big><em>jsonStr</em>, <em>row</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.processOneJSONObject" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is the main dispatch for track log event_types.
It&#8217;s a long method, and should be partitioned. First, bookkeeping
fields are filled in that are common to all events, such as the 
user agent, and the reference into the LoadInfo table that shows
on which date this row was loaded. Then a long &#8216;case&#8217; statement
calls handler methods depending on the incoming track log&#8217;s event_type.</p>
<p>Given one line from the EdX Track log, produce one row
of relational output. Return is an array of values, the 
same that is passed in. On the way, the partner JSONToRelation
object is called to ensure that JSON fields for which new columns
have not been created yet receive a place in the row array.    
Different types of JSON records will be passed: server heartbeats,
dashboard accesses, account creations, user logins. Example record
for the latter:</p>
<div class="highlight-python"><pre>{"username": "", 
 "host": "class.stanford.edu", 
 "event_source": "server", 
 "event_type": "/accounts/login", 
 "time": "2013-06-14T00:31:57.661338", 
 "ip": "98.230.189.66", 
 "event": "{
            "POST": {}, 
              "GET": {
                 "next": ["/courses/Medicine/HRP258/Statistics_in_Medicine/courseware/80160e.../"]}}", 
 "agent": "Mozilla/5.0 (Windows NT 5.1; rv:21.0) Gecko/20100101
 Firefox/21.0", 
 "page": null}</pre>
</div>
<p>Two more examples to show the variance in the format. Note &#8220;event&#8221; field:</p>
<dl class="docutils">
<dt>Second example::</dt>
<dd><dl class="first last docutils">
<dt>{&#8220;username&#8221;: &#8220;jane&#8221;, </dt>
<dd><p class="first">&#8220;host&#8221;: &#8220;class.stanford.edu&#8221;, 
&#8220;event_source&#8221;: &#8220;server&#8221;, 
&#8220;event_type&#8221;: &#8220;/courses/Education/EDUC115N/How_to_Learn_Math/modx/i4x://Education/EDUC115N/combinedopenended/c415227048464571a99c2c430843a4d6/get_results&#8221;, 
&#8220;time&#8221;: &#8220;2013-07-31T06:27:06.222843+00:00&#8221;, 
&#8220;ip&#8221;: &#8220;67.166.146.73&#8221;, 
&#8220;event&#8221;: &#8220;{&#8220;POST&#8221;: {</p>
<blockquote>
<div>&#8220;task_number&#8221;: [&#8220;0&#8221;]}, 
&#8220;GET&#8221;: {}}&#8221;,</div></blockquote>
<p class="last">&#8220;agent&#8221;: &#8220;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.71 Safari/537.36&#8221;, 
&#8220;page&#8221;: null
}</p>
</dd>
</dl>
</dd>
<dt>Third example::</dt>
<dd><dl class="first last docutils">
<dt>{&#8220;username&#8221;: &#8220;miller&#8221;, </dt>
<dd><p class="first">&#8220;host&#8221;: &#8220;class.stanford.edu&#8221;, 
&#8220;session&#8221;: &#8220;fa715506e8eccc99fddffc6280328c8b&#8221;, 
&#8220;event_source&#8221;: &#8220;browser&#8221;, 
&#8220;event_type&#8221;: &#8220;hide_transcript&#8221;, 
&#8220;time&#8221;: &#8220;2013-07-31T06:27:10.877992+00:00&#8221;, 
&#8220;ip&#8221;: &#8220;27.7.56.215&#8221;, 
&#8220;event&#8221;: &#8220;{&#8220;id&#8221;:&#8221;i4x-Medicine-HRP258-videoalpha-09839728fc9c48b5b580f17b5b348edd&#8221;,</p>
<blockquote>
<div>&#8220;code&#8221;:&#8221;fQ3-TeuyTOY&#8221;,
&#8220;currentTime&#8221;:0}&#8221;,</div></blockquote>
<p class="last">&#8220;agent&#8221;: &#8220;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.72 Safari/537.36&#8221;, 
&#8220;page&#8221;: &#8220;<a class="reference external" href="https://class.stanford.edu/courses/Medicine/HRP258/Statistics_in_Medicine/courseware/495757ee7b25401599b1ef0495b068e4/6fd116e15ab9436fa70b8c22474b3c17/">https://class.stanford.edu/courses/Medicine/HRP258/Statistics_in_Medicine/courseware/495757ee7b25401599b1ef0495b068e4/6fd116e15ab9436fa70b8c22474b3c17/</a>&#8221;
}</p>
</dd>
</dl>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>jsonStr</strong> (<em>String</em>) &#8211; string of a single, self contained JSON object</li>
<li><strong>row</strong> (<em>List&lt;&lt;any&gt;&gt;</em>) &#8211; partially filled array of values. Passed by reference</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the filled-in row</p>
</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: [&lt;any&gt;]</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushAccountInfo">
<tt class="descname">pushAccountInfo</tt><big>(</big><em>accountDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushAccountInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an ordered dict with the fields of
a create_account event. Pushes the values
(name, address, email, etc.) as a row to the
Account table, and returns the resulting row
primary key for inclusion in the main table&#8217;s
accountFKey field.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>accountDict</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushAnswers">
<tt class="descname">pushAnswers</tt><big>(</big><em>answersDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushAnswers" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Gets structure like this::</dt>
<dd><dl class="first docutils">
<dt>&#8220;answers&#8221;: {</dt>
<dd>&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1&#8221;: &#8220;choice_0&#8221;,
&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1&#8221;: &#8220;choice_3&#8221;</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>answersDict</strong> &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">array of keys created for answers in answersDict, and a dict mapping each key to the 
corresponding problem ID</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: ([String], Dict&lt;String,String&gt;</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushCorrectMaps">
<tt class="descname">pushCorrectMaps</tt><big>(</big><em>correctMapsDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushCorrectMaps" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get dicts like this::</dt>
<dd><dl class="first docutils">
<dt>{&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1&#8221;: {</dt>
<dd><blockquote class="first">
<div>&#8220;hint&#8221;: &#8220;&#8221;,
&#8220;hintmode&#8221;: null,
&#8220;correctness&#8221;: &#8220;correct&#8221;,
&#8220;msg&#8221;: &#8220;&#8221;,
&#8220;npoints&#8221;: null,
&#8220;queuestate&#8221;: null</div></blockquote>
<p>},
&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1&#8221;: {</p>
<blockquote>
<div>&#8220;hint&#8221;: &#8220;&#8221;,
&#8220;hintmode&#8221;: null,
&#8220;correctness&#8221;: &#8220;correct&#8221;,
&#8220;msg&#8221;: &#8220;&#8221;,
&#8220;npoints&#8221;: null,
&#8220;queuestate&#8221;: null</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
<p class="last">}
The above has two correctmaps.</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>correctMapsDict</strong> (<em>Dict&lt;String, Dict&lt;String,String&gt;&gt;</em>) &#8211; dict of CorrectMap dicts</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">array of unique keys, one key for each CorrectMap row the method has added.
In case of the above example that would be two keys (uuids)</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: [String]</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushDBCreations">
<tt class="descname">pushDBCreations</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushDBCreations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushInputStates">
<tt class="descname">pushInputStates</tt><big>(</big><em>inputStatesDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushInputStates" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Gets structure like this::</dt>
<dd><dl class="first docutils">
<dt>{</dt>
<dd>&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1&#8221;: {},
&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1&#8221;: {}</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>inputStatesDict</strong> &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">array of keys created for input state problems.</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: [String]</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushLoadInfo">
<tt class="descname">pushLoadInfo</tt><big>(</big><em>loadDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushLoadInfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushState">
<tt class="descname">pushState</tt><big>(</big><em>stateDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushState" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>We get a structure like this::</dt>
<dd><dl class="first docutils">
<dt>{   </dt>
<dd><dl class="first docutils">
<dt>&#8220;student_answers&#8221;: {</dt>
<dd>&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1&#8221;: &#8220;choice_3&#8221;,
&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1&#8221;: &#8220;choice_1&#8221;</dd>
</dl>
<p>},
&#8220;seed&#8221;: 1,
&#8220;done&#8221;: true,
&#8220;correct_map&#8221;: {</p>
<blockquote>
<div><dl class="docutils">
<dt>&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1&#8221;: {</dt>
<dd>&#8220;hint&#8221;: &#8220;&#8221;,
&#8220;hintmode&#8221;: null,
&#8220;correctness&#8221;: &#8220;incorrect&#8221;,
&#8220;msg&#8221;: &#8220;&#8221;,
&#8220;npoints&#8221;: null,
&#8220;queuestate&#8221;: null</dd>
</dl>
<p>},
&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1&#8221;: {</p>
<blockquote>
<div>&#8220;hint&#8221;: &#8220;&#8221;,
&#8220;hintmode&#8221;: null,
&#8220;correctness&#8221;: &#8220;incorrect&#8221;,
&#8220;msg&#8221;: &#8220;&#8221;,
&#8220;npoints&#8221;: null,
&#8220;queuestate&#8221;: null</div></blockquote>
<p>}</p>
</div></blockquote>
<p>},
&#8220;input_state&#8221;: {</p>
<blockquote>
<div>&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_3_1&#8221;: {},
&#8220;i4x-Medicine-HRP258-problem-e194bcb477104d849691d8b336b65ff6_2_1&#8221;: {}</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stateDict</strong> &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">array of keys into State table that were created in this method</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: [String]</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushTableCreations">
<tt class="descname">pushTableCreations</tt><big>(</big><em>replaceTables</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.pushTableCreations" title="Permalink to this definition">¶</a></dt>
<dd><p>Pushes SQL statements to caller that create all tables, main and
auxiliary. After these CREATE statements, &#8216;START TRANSACTION;n&#8217; is
pushed. The caller is responsible for pushing &#8216;COMMIT;n&#8217; when all
subsequent INSERT statements have been pushed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replaceTables</strong> (<em>Boolean</em>) &#8211; if True, then generated CREATE statements will first DROP the various tables. 
If False, the CREATE statements will be IF NOT EXISTS</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.rescueBadJSON">
<tt class="descname">rescueBadJSON</tt><big>(</big><em>badJSONStr</em>, <em>row=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.rescueBadJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>When JSON strings are not legal, we at least try to extract 
the username, host, session, event_type, event_source, and event fields
verbatim, i.e. without real parsing. We place those in the proper 
fields, and leave it at that.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>badJSONStr</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.resultTriplet">
<tt class="descname">resultTriplet</tt><big>(</big><em>row</em>, <em>targetTableName</em>, <em>colNamesToSet=None</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.resultTriplet" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an array of column names, and an array of column values,
construct the return triplet needed for JSONToRelation instance
to generate its INSERT statements (see JSONToRelation.prepareMySQLRow()).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>row</strong> (<em>[&lt;any&gt;]</em>) &#8211; array of column values</li>
<li><strong>targetTableName</strong> (<em>String</em>) &#8211; name of SQL table to which the result is directed. The caller
of processOneJSONObject() will create an INSERT statement
for that table.</li>
<li><strong>colNamesToSet</strong> (<em>[String]</em>) &#8211; array of strings listing column names in the order in which
their values appear in the row parameter. If None, we assume
the values are destined for the main event table, whose
schema is &#8216;well known&#8217;.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">table name, string with all comma-separated column names, and values as a 3-tuple</p>
</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: (String, String, [&lt;any&gt;])</p>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.searchPatternDict">
<tt class="descname">searchPatternDict</tt><em class="property"> = {'username': &lt;_sre.SRE_Pattern object at 0x2a37e50&gt;, 'event_source': &lt;_sre.SRE_Pattern object at 0x20fae70&gt;, 'event_type': &lt;_sre.SRE_Pattern object at 0x274ad40&gt;, 'ip': &lt;_sre.SRE_Pattern object at 0x274b3f0&gt;, 'host': &lt;_sre.SRE_Pattern object at 0x27552a0&gt;, 'session': &lt;_sre.SRE_Pattern object at 0x240f350&gt;, 'time': &lt;_sre.SRE_Pattern object at 0x274af10&gt;, 'event': &lt;_sre.SRE_Pattern object at 0x274b1a0&gt;}</em><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.searchPatternDict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.setResourceDisplayName">
<tt class="descname">setResourceDisplayName</tt><big>(</big><em>row</em>, <em>openEdxHash</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.setResourceDisplayName" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an OpenEdx hash of problem ID, video ID, or course ID,
set the resource_display_name in the given row. The value
passed in may have the actual hash embedded in a larger
string, as in:</p>
<div class="highlight-python"><pre>input_i4x-Medicine-HRP258-problem-7451f8fe15a642e1820767db411a4a3e_2_1</pre>
</div>
<p>We fish it out of there.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> (<em>[&lt;any&gt;]</em>) &#8211; current row&#8217;s values</li>
<li><strong>openEdxHash</strong> (<em>String</em>) &#8211; 32-bit hash string encoding a problem, video, or class, or 
such a 32-bit hash embedded in a larger string.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.setupMySqlDumpControlInstructions">
<tt class="descname">setupMySqlDumpControlInstructions</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.setupMySqlDumpControlInstructions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleGotoPosition">
<tt class="descname">subHandleGotoPosition</tt><big>(</big><em>row</em>, <em>eventDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleGotoPosition" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Called from handlePathStyledEventTypes(). Event dict looks like this::</dt>
<dd>{&#8220;position&#8221;: [&#8220;2&#8221;]}, &#8220;GET&#8221;: {}}&#8221;</dd>
</dl>
<p>The caller is expected to have verified the legitimacy of EventDict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>eventDict</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleIsStudentCalibrated">
<tt class="descname">subHandleIsStudentCalibrated</tt><big>(</big><em>row</em>, <em>eventDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleIsStudentCalibrated" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Called from handlePathStyledEventTypes(). Event dict looks like this::</dt>
<dd>{&#8220;location&#8221;: [&#8220;i4x://Education/EDUC115N/combinedopenended/0d67667941cd4e14ba29abd1542a9c5f&#8221;]}, &#8220;GET&#8221;: {}&#8221;</dd>
</dl>
<p>The caller is expected to have verified the legitimacy of EventDict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>eventDict</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleProblem">
<tt class="descname">subHandleProblem</tt><big>(</big><em>row</em>, <em>eventDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleProblem" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Called from handlePathStyledEventTypes(). Event dict looks like this::</dt>
<dd>{&#8220;location&#8221;: [&#8220;i4x://Education/EDUC115N/combinedopenended/0d67667941cd4e14ba29abd1542a9c5f&#8221;]}, &#8220;GET&#8221;: {}}&#8221;</dd>
</dl>
<p>The caller is expected to have verified the legitimacy of EventDict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>eventDict</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleProblemCheckInPath">
<tt class="descname">subHandleProblemCheckInPath</tt><big>(</big><em>row</em>, <em>answersDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleProblemCheckInPath" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get dict like this::</dt>
<dd><dl class="first last docutils">
<dt>{&#8220;input_i4x-Medicine-HRP258-problem-f0b292c175f54714b41a1b05d905dbd3_2_1&#8221;: [&#8220;choice_3&#8221;]}, </dt>
<dd>&#8220;GET&#8221;: {}}&#8221;</dd>
</dl>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>answersDict</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleSaveAnswer">
<tt class="descname">subHandleSaveAnswer</tt><big>(</big><em>row</em>, <em>eventDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleSaveAnswer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Called from handlePathStyledEventTypes(). Event dict looks like this::</dt>
<dd><dl class="first last docutils">
<dt>{&#8220;student_file&#8221;: [&#8220;&#8221;], </dt>
<dd>&#8220;student_answer&#8221;: [&#8220;Students will have to use higher level thinking to describe the...in the race. &#8220;], 
&#8220;can_upload_files&#8221;: [&#8220;false&#8221;]}, &#8220;GET&#8221;: {}}&#8221;</dd>
</dl>
</dd>
</dl>
<p>The caller is expected to have verified the legitimacy of EventDict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>eventDict</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleSaveGrade">
<tt class="descname">subHandleSaveGrade</tt><big>(</big><em>row</em>, <em>postDict</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.subHandleSaveGrade" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get something like::</dt>
<dd><dl class="first last docutils">
<dt>&#8220;{&#8220;POST&#8221;: {&#8220;submission_id&#8221;: [&#8220;60611&#8221;], </dt>
<dd>&#8220;feedback&#8221;: [&#8220;&lt;p&gt;This is a summary of a paper stating the positive effects of a certain hormone on face recognition for people with disrupted face processing [1].n&lt;br&gt;n&lt;br&gt;Face recognition is essential for social interaction and most people perform it effortlessly. But a surprisingly high number of people u2013 one in forty u2013 are impaired since birth in their ability to recognize faces [2]. This condition is called &#8216;developmental prosopagnosia&#8217;. Its cause isnu2&#8221;</dd>
</dl>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> &#8211; </li>
<li><strong>postDict</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.tryJSONExtraction">
<tt class="descname">tryJSONExtraction</tt><big>(</big><em>pattern</em>, <em>theStr</em><big>)</big><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.tryJSONExtraction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.zipCodePattern">
<tt class="descname">zipCodePattern</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x24b38f0&gt;</em><a class="headerlink" href="#json_to_relation.edxTrackLogJSONParser.EdXTrackLogJSONParser.zipCodePattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.generic_json_parser">
<span id="generic-json-parser-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">generic_json_parser</span></tt> Module<a class="headerlink" href="#module-json_to_relation.generic_json_parser" title="Permalink to this headline">¶</a></h2>
<p>Created on Sep 23, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="class">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser">
<em class="property">class </em><tt class="descclassname">json_to_relation.generic_json_parser.</tt><tt class="descname">GenericJSONParser</tt><big>(</big><em>jsonToRelationConverter</em>, <em>logfileID=''</em>, <em>progressEvery=1000</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Takes a JSON string, and returns a CSV row for later import into a relational database.</p>
<dl class="attribute">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.REMOVE_ITEM_FROM_STRING_PATTERN">
<tt class="descname">REMOVE_ITEM_FROM_STRING_PATTERN</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x262c2e8&gt;</em><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.REMOVE_ITEM_FROM_STRING_PATTERN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.decArrayIndex">
<tt class="descname">decArrayIndex</tt><big>(</big><em>arrayIndexStack</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.decArrayIndex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.getReadyForNextRow">
<tt class="descname">getReadyForNextRow</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.getReadyForNextRow" title="Permalink to this definition">¶</a></dt>
<dd><p>To be called after one row has been processed in
processOneJSONObject() of this class or one of
its subclasses. Cleans out any datastructures that
are only good during creation of one row.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.incArrayIndex">
<tt class="descname">incArrayIndex</tt><big>(</big><em>arrayIndexStack</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.incArrayIndex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.logDebug">
<tt class="descname">logDebug</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.logDebug" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.logError">
<tt class="descname">logError</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.logError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.logInfo">
<tt class="descname">logInfo</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.logInfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.logWarn">
<tt class="descname">logWarn</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.logWarn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.processOneJSONObject">
<tt class="descname">processOneJSONObject</tt><big>(</big><em>jsonStr</em>, <em>row</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.processOneJSONObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a JSON string that is one entire JSON object, parse the
string into nested dicts. Derive relational column names from the
(possibly nested) labels. Cooperate with the parent JSONToRelations
instance to build a schema of typed SQL columns. Fill the passed-in
row with values from the JSON string. The following mappings from
Python values are used:</p>
<div class="highlight-python"><pre>('null', None)
    ('boolean', &lt;true orfFalse&gt;)
    ('number', &lt;int or Decimal&gt;)
    ('string', &lt;unicode&gt;)
    ('map_key', &lt;str&gt;)
    ('start_map', None)
    ('end_map', None)
    ('start_array', None)
    ('end_array', None)
    
    :param jsonStr: string of a single, self contained JSON object
    :type jsonStr: String
    :param row: partially filled array of values.
    :type row: List&lt;&lt;any&gt;&gt;
    :return: array of values. Fills into the passed-in row array
    @rtype: [&lt;any&gt;]</pre>
</div>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.removeItemPartOfString">
<tt class="descname">removeItemPartOfString</tt><big>(</big><em>label</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.removeItemPartOfString" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a label, like employee.item.name, remove the last
occurrence of &#8216;item&#8217;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>label</strong> (<em>String</em>) &#8211; string from which last &#8216;item&#8217; occurrence is to be removed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">label after deletion of the substring</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.reportProgressIfNeeded">
<tt class="descname">reportProgressIfNeeded</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.reportProgressIfNeeded" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.GenericJSONParser.setValInRow">
<tt class="descname">setValInRow</tt><big>(</big><em>theRow</em>, <em>colName</em>, <em>value</em>, <em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.GenericJSONParser.setValInRow" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a column name, a value and a partially filled row,
add the column to the row, or set the value in an already
existing row. Uses the JSONToRelation instance passed to 
__init__() to obtain current schema.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>theRow</strong> (<em>List&lt;&lt;any&gt;&gt;</em>) &#8211; list of values in their proper column positions</li>
<li><strong>colName</strong> (<em>String</em>) &#8211; name of column into which value is to be inserted.</li>
<li><strong>value</strong> (<em>&lt;any&gt;, as per ColDataType</em>) &#8211; the field value</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the passed-in row, with the new value added at the proper index.</p>
</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: List&lt;&lt;any&gt;&gt;</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.generic_json_parser.Stack">
<em class="property">class </em><tt class="descclassname">json_to_relation.generic_json_parser.</tt><tt class="descname">Stack</tt><a class="headerlink" href="#json_to_relation.generic_json_parser.Stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Simple stack implementation for use in recursive descent.</p>
<dl class="method">
<dt id="json_to_relation.generic_json_parser.Stack.empty">
<tt class="descname">empty</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.Stack.empty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.Stack.pop">
<tt class="descname">pop</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.Stack.pop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.Stack.push">
<tt class="descname">push</tt><big>(</big><em>item</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.Stack.push" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.Stack.stackHeight">
<tt class="descname">stackHeight</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.Stack.stackHeight" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.generic_json_parser.Stack.top">
<tt class="descname">top</tt><big>(</big><em>exceptionOnEmpty=False</em><big>)</big><a class="headerlink" href="#json_to_relation.generic_json_parser.Stack.top" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.input_source">
<span id="input-source-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">input_source</span></tt> Module<a class="headerlink" href="#module-json_to_relation.input_source" title="Permalink to this headline">¶</a></h2>
<p>Created on Sep 14, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="class">
<dt id="json_to_relation.input_source.COMPRESSION_TYPE">
<em class="property">class </em><tt class="descclassname">json_to_relation.input_source.</tt><tt class="descname">COMPRESSION_TYPE</tt><a class="headerlink" href="#json_to_relation.input_source.COMPRESSION_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="json_to_relation.input_source.COMPRESSION_TYPE.BZIP2">
<tt class="descname">BZIP2</tt><em class="property"> = 2</em><a class="headerlink" href="#json_to_relation.input_source.COMPRESSION_TYPE.BZIP2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.input_source.COMPRESSION_TYPE.GZIP">
<tt class="descname">GZIP</tt><em class="property"> = 1</em><a class="headerlink" href="#json_to_relation.input_source.COMPRESSION_TYPE.GZIP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.input_source.COMPRESSION_TYPE.NO_COMPRESSION">
<tt class="descname">NO_COMPRESSION</tt><em class="property"> = 0</em><a class="headerlink" href="#json_to_relation.input_source.COMPRESSION_TYPE.NO_COMPRESSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.input_source.InMongoDB">
<em class="property">class </em><tt class="descclassname">json_to_relation.input_source.</tt><tt class="descname">InMongoDB</tt><big>(</big><em>server</em>, <em>pwd</em>, <em>dbName</em>, <em>collName</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InMongoDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#json_to_relation.input_source.InputSource" title="json_to_relation.input_source.InputSource"><tt class="xref py py-class docutils literal"><span class="pre">json_to_relation.input_source.InputSource</span></tt></a></p>
<dl class="method">
<dt id="json_to_relation.input_source.InMongoDB.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InMongoDB.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InMongoDB.connect">
<tt class="descname">connect</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InMongoDB.connect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InMongoDB.decompress">
<tt class="descname">decompress</tt><big>(</big><em>line</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InMongoDB.decompress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InMongoDB.getSourceName">
<tt class="descname">getSourceName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InMongoDB.getSourceName" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify this source such that logging can identify sources
of errors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a string that can be prepended to a line number in error/warn msgs</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.input_source.InPipe">
<em class="property">class </em><tt class="descclassname">json_to_relation.input_source.</tt><tt class="descname">InPipe</tt><a class="headerlink" href="#json_to_relation.input_source.InPipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#json_to_relation.input_source.InputSource" title="json_to_relation.input_source.InputSource"><tt class="xref py py-class docutils literal"><span class="pre">json_to_relation.input_source.InputSource</span></tt></a></p>
<dl class="method">
<dt id="json_to_relation.input_source.InPipe.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InPipe.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InPipe.decompress">
<tt class="descname">decompress</tt><big>(</big><em>line</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InPipe.decompress" title="Permalink to this definition">¶</a></dt>
<dd><p>No decompression for pipes. Pipe through gunzip or similar first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>line</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InPipe.getSourceName">
<tt class="descname">getSourceName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InPipe.getSourceName" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify this source such that logging can identify sources
of errors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a string that can be prepended to a line number in error/warn msgs</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.input_source.InString">
<em class="property">class </em><tt class="descclassname">json_to_relation.input_source.</tt><tt class="descname">InString</tt><big>(</big><em>inputStr</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InString" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#json_to_relation.input_source.InputSource" title="json_to_relation.input_source.InputSource"><tt class="xref py py-class docutils literal"><span class="pre">json_to_relation.input_source.InputSource</span></tt></a></p>
<dl class="method">
<dt id="json_to_relation.input_source.InString.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InString.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InString.decompress">
<tt class="descname">decompress</tt><big>(</big><em>line</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InString.decompress" title="Permalink to this definition">¶</a></dt>
<dd><p>No decompression for strings</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>line</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InString.getSourceName">
<tt class="descname">getSourceName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InString.getSourceName" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify this source such that logging can identify sources
of errors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a string that can be prepended to a line number in error/warn msgs</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.input_source.InURI">
<em class="property">class </em><tt class="descclassname">json_to_relation.input_source.</tt><tt class="descname">InURI</tt><big>(</big><em>inFilePathOrURL</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InURI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#json_to_relation.input_source.InputSource" title="json_to_relation.input_source.InputSource"><tt class="xref py py-class docutils literal"><span class="pre">json_to_relation.input_source.InputSource</span></tt></a></p>
<dl class="method">
<dt id="json_to_relation.input_source.InURI.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InURI.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InURI.decompress">
<tt class="descname">decompress</tt><big>(</big><em>line</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InURI.decompress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InURI.determineCompression">
<tt class="descname">determineCompression</tt><big>(</big><em>fileURI</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InURI.determineCompression" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a file path, determine by file extension whether
the file is gzip or bzip2 compressed, or whether it is
not compressed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fileURI</strong> (<em>STRING</em>) &#8211; item that str() turns into a file path or URL</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InURI.ensureFileLocal">
<tt class="descname">ensureFileLocal</tt><big>(</big><em>inFilePathOrURL</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InURI.ensureFileLocal" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a file path or URL. Sets self.localFilePath
to the same path if file is local, or
if the file is remote but uncompressed. 
If a file is remote and compressed, retrieves
the file into a local tmp file and returns that
file name. In this case the flag self.deleteTempFile
is set to True.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>inFilePathOrURL</strong> (<em>String</em>) &#8211; file path or URL to file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.input_source.InURI.getSourceName">
<tt class="descname">getSourceName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InURI.getSourceName" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify this source such that logging can identify sources
of errors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a string that can be prepended to a line number in error/warn msgs</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.input_source.InputSource">
<em class="property">class </em><tt class="descclassname">json_to_relation.input_source.</tt><tt class="descname">InputSource</tt><big>(</big><em>inputSource</em><big>)</big><a class="headerlink" href="#json_to_relation.input_source.InputSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Possible sources for JSON objects. These are
files on the local file system, URLs linking to
JSON strings, and MongoDB collections.</p>
</dd></dl>

</div>
<div class="section" id="module-json_to_relation.json_to_relation">
<span id="json-to-relation-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">json_to_relation</span></tt> Module<a class="headerlink" href="#module-json_to_relation.json_to_relation" title="Permalink to this headline">¶</a></h2>
<p>Created on Sep 14, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="docutils">
<dt>Modifications:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Dec 28, 2013: Account copy from Edx to EdxPrivate after load now</dt>
<dd><p class="first last">uses REPLACE INTO, rather than INSERT INTO</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dec 29, 2013: changed load time for LoadInfo to local time (was gmtime).</dt>
<dd><p class="first last">Also ensured that the time str entered into LoadInfo
is ISO compliant.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="json_to_relation.json_to_relation.JSONToRelation">
<em class="property">class </em><tt class="descclassname">json_to_relation.json_to_relation.</tt><tt class="descname">JSONToRelation</tt><big>(</big><em>jsonSource</em>, <em>destination</em>, <em>schemaHints=OrderedDict()</em>, <em>jsonParserInstance=None</em>, <em>loggingLevel=20</em>, <em>logFile=None</em>, <em>mainTableName='Main'</em>, <em>progressEvery=1000</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Given a source with JSON structures, derive a schema, and construct 
a relational table. Source can be a local file name, a URL, a
StringIO pseudofile, or a Unix pipe.</p>
<p>JSON structures in the source must be one per line. That is, each line in 
the source must be a self contained JSON object. Pretty printed strings
won&#8217;t work.</p>
<dl class="attribute">
<dt id="json_to_relation.json_to_relation.JSONToRelation.LEGAL_MYSQL_ATTRIBUTE_PATTERN">
<tt class="descname">LEGAL_MYSQL_ATTRIBUTE_PATTERN</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x4ad5870&gt;</em><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.LEGAL_MYSQL_ATTRIBUTE_PATTERN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.json_to_relation.JSONToRelation.MAX_ALLOWED_PACKET_SIZE">
<tt class="descname">MAX_ALLOWED_PACKET_SIZE</tt><em class="property"> = 1000000</em><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.MAX_ALLOWED_PACKET_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.json_to_relation.JSONToRelation.MAX_SQL_INT">
<tt class="descname">MAX_SQL_INT</tt><em class="property"> = 2147483647.0</em><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.MAX_SQL_INT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.json_to_relation.JSONToRelation.MIN_SQL_INT">
<tt class="descname">MIN_SQL_INT</tt><em class="property"> = -2147483648.0</em><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.MIN_SQL_INT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.bumpLineCounter">
<tt class="descname">bumpLineCounter</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.bumpLineCounter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.bumpNextNewColPos">
<tt class="descname">bumpNextNewColPos</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.bumpNextNewColPos" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.calculateHeldBackDataSize">
<tt class="descname">calculateHeldBackDataSize</tt><big>(</big><em>valueArray</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.calculateHeldBackDataSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes number of ASCII bytes needed for the
values in the given array. Used to estimate 
when held-back INSERT data needs to be flushed
to server. Ex: [&#8216;foo&#8217;, 10] returns 7.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>valueArray</strong> (<em>[&lt;any&gt;]</em>) &#8211; array of mixed-type values to be INSERTed into MySQL at some point</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.constructValuesStr">
<tt class="descname">constructValuesStr</tt><big>(</big><em>valsArrays</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.constructValuesStr" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an array of arrays that hold the values to use in 
an INSERT statement. Ex: [[&#8216;foo&#8217;,10],[&#8216;bar&#8217;,20]]. Returns
a StringIO string file containing a legal INSERT statement&#8217;s
VALUES part: (&#8216;foo&#8217;,10),(&#8216;bar&#8217;,20)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>valsArrays</strong> (<em>[[&lt;any&gt;]]</em>) &#8211; array of values arrays</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">IOString string file with legal VALUES section of INSERT statement</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: IOString</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.convert">
<tt class="descname">convert</tt><big>(</big><em>prependColHeader=False</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Main user-facing API method. Read from the JSON source establish
in the __init__() call. Create a MySQL schema as the JSON is read.
Convert each JSON object into the requested output format (e.g. CSV),
and deliver it to the destination (e.g. a file)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prependColHeader</strong> (<em>Boolean</em>) &#8211; If true, the final destination, if it is stdout or a file,
will have the column names prepended. Note that this option requires that
the output file is first written to a temp file, and then merged with the
completed column name header row to the final destination that was specified
by the client.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.ensureColExistence">
<tt class="descname">ensureColExistence</tt><big>(</big><em>colName</em>, <em>colDataType</em>, <em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.ensureColExistence" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.ensureLegalIdentifierChars">
<tt class="descname">ensureLegalIdentifierChars</tt><big>(</big><em>proposedMySQLName</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.ensureLegalIdentifierChars" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a proposed MySQL identifier, such as a column name,
return a possibly modified name that will be acceptable to
a MySQL database. MySQL accepts alphanumeric, underscore,
and dollar sign. Identifiers with other chars must be quoted.
Quote characters embedded within the identifiers must be
doubled to be escaped.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>proposedMySQLName</strong> (<em>String</em>) &#8211; input name</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the possibly modified, legal MySQL identifier</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.finalizeInsertStatement">
<tt class="descname">finalizeInsertStatement</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.finalizeInsertStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a possibly multivalued INSERT statement from what is
stored in self.currOutTable, self.currInsertSig, and self.currValsArray.
Example return:</p>
<div class="highlight-python"><pre>INSERT INTO myTable (col2, col2) VALUES
   ('foo',10),
   ('bar',20);</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a fully formed SQL INSERT statement, possibly including multiple values. None if nothing to insert.</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {String | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.flush">
<tt class="descname">flush</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>MUST be called when no more items are to be converted. Needed
because for SQL statements, value insertions are held back to
accumulate multiple insert value for use in a single insert
statement. This speeds up load times into the databases later.
If flush() is not called, output may be missing.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.getColHeaders">
<tt class="descname">getColHeaders</tt><big>(</big><em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.getColHeaders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of column header names collected so far.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of column headers that were discovered so far by an 
associated JSON parser descending into a JSON structure.</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: [String]</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.getNextNewColPos">
<tt class="descname">getNextNewColPos</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.getNextNewColPos" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the position of the next new column that
may need to be added when a previously unseen JSON
label is encountered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">position in schema where the next new discovered column header is to go.</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: int</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.getSchema">
<tt class="descname">getSchema</tt><big>(</big><em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.getSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an ordered list of ColumnSpec instances.
Each such instance holds column name and SQL type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tableName</strong> (<em>String</em>) &#8211; name of table for which schema is wanted. None: the main (default) table.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">ordered list of column information</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: (ColumnSpec)</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.getSchemaHint">
<tt class="descname">getSchemaHint</tt><big>(</big><em>colName</em>, <em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.getSchemaHint" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a column name, and a table name, return the ColumnSpec for that column in that table.
If tableName is None, the table is assumed to be the main (default) table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>colName</strong> (<em>String</em>) &#8211; name of column whose ColumnSpec instance is wanted</li>
<li><strong>tableName</strong> (<em>{String | None}</em>) &#8211; name of table of which the column is a part</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a ColumnSpec object that contains the SQL type name of the column</p>
</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: ColumnSpec
&#64;raise KeyError: if either the table or the column don&#8217;t exist.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.getSchemaHintByPos">
<tt class="descname">getSchemaHintByPos</tt><big>(</big><em>pos</em>, <em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.getSchemaHintByPos" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.getSourceName">
<tt class="descname">getSourceName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.getSourceName" title="Permalink to this definition">¶</a></dt>
<dd><p>Request a human-readable name of the JSON source, which 
might be a pipe, or a file, or something else. Each input source
class knows to provide such a name.</p>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.json_to_relation.JSONToRelation.logger">
<tt class="descname">logger</tt><em class="property"> = None</em><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.json_to_relation.JSONToRelation.loggingInitialized">
<tt class="descname">loggingInitialized</tt><em class="property"> = False</em><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.loggingInitialized" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.makeFileCitation">
<tt class="descname">makeFileCitation</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.makeFileCitation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.prepareMySQLRow">
<tt class="descname">prepareMySQLRow</tt><big>(</big><em>insertInfo</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.prepareMySQLRow" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives either a triple (&#8216;tableName&#8217;, &#8216;insertSig&#8217;, [valsArray]),
or the string &#8216;FLUSH&#8217;. Generates either None, or a legal MySQL insert statement. 
The method is lazy.</p>
<p>It collects values to be inserted into the same table, and the same
columns within that table, and returns a non-Null string only when
the incoming insertInfo is for a different table, or a different set
of columns in the same table (as the previous calls). In that case the
returned string is a legal MySQL INSERT statement, possibly multi-valued.</p>
<p>If insertInfo is the string &#8216;FLUSH&#8217;, then an INSERT statement is
returned for any held-back prior values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>insertInfo</strong> (<em>{(String, String, [&lt;any&gt;]) | String)}</em>) &#8211; information on what to generate for MySQL dumps</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.processFinishedRow">
<tt class="descname">processFinishedRow</tt><big>(</big><em>filledNewRow</em>, <em>outFd</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.processFinishedRow" title="Permalink to this definition">¶</a></dt>
<dd><p>When a row is finished, this method processes the row as per
the user&#8217;s disposition. The method writes the row to a CSV
file, or pipe, or generates an SQL insert statement for later.</p>
<p>The filledNewRow parameter looks different, depending on whether
the underlying parser generates MySQL insert statement information,
or CSV rows. The latter are just written to outFD. MySQL insert info
looks like this: (&#8216;tableName&#8217;, &#8216;insertSig&#8217;, [valsArray]). The insertSig
is a string as needed for the INSERT statement&#8217;s column names part. 
Ex.: &#8216;col1,col2&#8217;. The filledNewRow may also be the string &#8216;FLUSH&#8217;, which
triggers flushing all buffers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filledNewRow</strong> (<em>{(String,String,List&lt;&lt;any&gt;&gt;) | List&lt;&lt;any&gt;&gt; | String}</em>) &#8211; the list of values for one row, possibly including empty fields</li>
<li><strong>outFd</strong> (<em>OutputDisposition</em>) &#8211; an instance of a class that writes to the destination</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.pushString">
<tt class="descname">pushString</tt><big>(</big><em>whatToWrite</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.pushString" title="Permalink to this definition">¶</a></dt>
<dd><p>Pushes the given string straight to the output (pipe or file).
No error checking is done. Used by underlying parsers 
for SQL other than INSERT statements, such as DROP, CREATE.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>whatToWrite</strong> (<em>String</em>) &#8211; a complete SQL statement.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.pushToTable">
<tt class="descname">pushToTable</tt><big>(</big><em>row</em>, <em>outFd=None</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.pushToTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Called both from convert(), and from some parsers to add one row to 
one table. For CSV outputs the target table is implied: there is only
one. But for parsers that generate INSERT statements, the targets
might be different tables on each call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>row</strong> (<em>{[&lt;any&gt;] | (String, String, [&lt;any&gt;])}</em>) &#8211; either an array of CSV values, or a triplet (tableName, insertSig, valsArray) (from MySQL INSERT-generating parsers)</li>
<li><strong>outFd</strong> (<em>subclass of OutputDisposition</em>) &#8211; subclass of OutputDisposition</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.setParser">
<tt class="descname">setParser</tt><big>(</big><em>parserInstance</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.setParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parser instance to use for upcoming calls to the convert() method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>parserInstance</strong> (<em>{GenericJSONParser | subclass}</em>) &#8211; must be instance of GenericJSONParser or one of its subclasses</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.setSchemaHints">
<tt class="descname">setSchemaHints</tt><big>(</big><em>schemaHints</em>, <em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.setSchemaHints" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a schema hint dictionary, set the given table&#8217;s schema
to the given dictionary. Any schema fragments already defined
for table tableName will be removed</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>schemaHints</strong> (<em>[Ordered]Dict&lt;String,ColumnSpec&gt;</em>) &#8211; dict mapping column names to ColumnSpec instances</li>
<li><strong>tableName</strong> (<em>String</em>) &#8211; name of table whose schema is to be changed. None changes the main (default) table&#8217;s schema</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.setupLogging">
<tt class="descname">setupLogging</tt><big>(</big><em>loggingLevel</em>, <em>logFile</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.setupLogging" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.json_to_relation.JSONToRelation.startNewTable">
<tt class="descname">startNewTable</tt><big>(</big><em>tableName</em>, <em>schemaHintsNewTable</em><big>)</big><a class="headerlink" href="#json_to_relation.json_to_relation.JSONToRelation.startNewTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by parsers when they need to start a new relational
table beyond the one that is created for them. Ex: edxTrackLogJSONParser.py
needs auxiliary tables for deeply embedded JSON structures with unpredictable
numbers of elements (e.g. problem state). The schemaHintsNewTable 
is an optionally ordered dict. Parsers may add additional columns later
via calls to ensureColExistence(). Note that for MySQL load files such
subsequent addition generates ALTER table, which might be expensive. So,
completeness of the schemaHintsNewTable dict is recommended for MySQL
load file outputs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tableName</strong> (<em>String</em>) &#8211; name by which parser will refer to this table.</li>
<li><strong>schemaHintsNewTable</strong> (<em>[Ordered]Dict&lt;String,ColumnSpec&gt;</em>) &#8211; dict that map column names to SQL types</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.locationManager">
<span id="locationmanager-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">locationManager</span></tt> Module<a class="headerlink" href="#module-json_to_relation.locationManager" title="Permalink to this headline">¶</a></h2>
<p>Created on Nov 3, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="class">
<dt id="json_to_relation.locationManager.LocationManager">
<em class="property">class </em><tt class="descclassname">json_to_relation.locationManager.</tt><tt class="descname">LocationManager</tt><a class="headerlink" href="#json_to_relation.locationManager.LocationManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Manages fast lookup of countries, given words that <em>might</em> be countries.</p>
<dl class="method">
<dt id="json_to_relation.locationManager.LocationManager.isCountry">
<tt class="descname">isCountry</tt><big>(</big><em>candidateStr</em><big>)</big><a class="headerlink" href="#json_to_relation.locationManager.LocationManager.isCountry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.modulestoreImporter">
<span id="modulestoreimporter-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">modulestoreImporter</span></tt> Module<a class="headerlink" href="#module-json_to_relation.modulestoreImporter" title="Permalink to this headline">¶</a></h2>
<p>Created on Nov 30, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="class">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter">
<em class="property">class </em><tt class="descclassname">json_to_relation.modulestoreImporter.</tt><tt class="descname">ModulestoreImporter</tt><big>(</big><em>jsonFileName</em>, <em>useCache=False</em>, <em>pickleCachePath=None</em>, <em>parent=None</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/userdict.html#UserDict.DictMixin" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">UserDict.DictMixin</span></tt></a></p>
<p>Imports the result of a query to the modulestore (descriptions of OpenEdx courses).
That query is run by the script cronRefreshModuleStore.sh, and produces a JSON
file that contains just the information needed for the mapping of an OpenEdx
32-bit resource hash to an associated organization (e.g. Medicine, Engineering, CME,...), 
course_short_name (e.g. ENGR14), category (e.g. problem, video, course,...), 
revision (e.g. Draft), and display name. Example for the latter: &#8216;Problem 2.4&#8217; for a category
&#8216;problem&#8217; case, or &#8216;Finding the p value&#8217; for a category &#8216;video&#8217; entry.</p>
<p>The result of that query is assumed to be stored in a file whose path is given to the constructor
of this class, which is user facing.</p>
<p>Instances of this class parse the JSON file, creating two in-memory dicts whose contents
are available via public methods. The first dict maps a short course name, like &#8216;ENGR14&#8217; to a 
canonical name, like &#8216;Engineering/ENGR14/Stats_in_engineering&#8217;. The second maps OpenEdx
32-bit hash number strings to information associated with that hash: organization, course
short name, category, revision, and display name.</p>
<p>To find the canonical course name from a short course name, treat your instance
of this class like a dict: anonName = myModStoreImporter[&#8216;ENGR14&#8217;]. To find a
category, revision, etc., given a hash, use the corresponding methods:
getCategory(hash), getRevision(hash), etc.</p>
<p>In addition to these services that are intended to be used by Python programs,
an instance of this class can export either or both of the dicts to .csv files.
See methods exportCourseNameLookup() and exportHashInfo()</p>
<p>To save time for Python clients, the hash-to-info dict is pickled to a file
as a cache. Clients may choose to use this cache as part of instance construction.</p>
<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.buildCourseShortNameToCourseName">
<tt class="descname">buildCourseShortNameToCourseName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.buildCourseShortNameToCourseName" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a dict self.courseNameLookup, which maps a
short course name, like ENGR14 to a canonical name,
like &#8216;Engineering/ENGR14/Stats_in_engineering&#8217;.
The canonical name is constructed like this:
org/course_short_name/&lt;longCourseName&gt;, where
&lt;longCourseName&gt; is the (JSON) _id.name field of
an entry of category &#8216;course&#8217;. Those fields
contain the long course name.
Input is self.hashLookup, a dict mapping hash
keys to little dicts with the contents of one modulestore
entry.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.exportCourseNameLookup">
<tt class="descname">exportCourseNameLookup</tt><big>(</big><em>outFilePath</em>, <em>addHeader=True</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.exportCourseNameLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the dict shortCourseName &#8211;&gt; canonicalName to
CSV with header:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;course_short_name&#39;</span><span class="p">,</span><span class="n">course_name</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>outFilePath</strong> (<em>{String | File}</em>) &#8211; fully qualified name of .csv output file</li>
<li><strong>addHeader</strong> (<em>Bool</em>) &#8211; whether or not to add a header line</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>&#64;raise ValueError: when modulestore JSON could not be parsed.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.exportHashInfo">
<tt class="descname">exportHashInfo</tt><big>(</big><em>outFilePath</em>, <em>addHeader=True</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.exportHashInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the dict hash &#8211;&gt; org/category/... to 
CSV with header:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;name_hash&#39;</span><span class="p">,</span><span class="s">&#39;org&#39;</span><span class="p">,</span><span class="s">&#39;short_course_name&#39;</span><span class="p">,</span><span class="s">&#39;category&#39;</span><span class="p">,</span><span class="s">&#39;revision&#39;</span><span class="p">,</span><span class="s">&#39;display_name&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>outFilePath</strong> (<em>{String | File}</em>) &#8211; fully qualified name of .csv output file</li>
<li><strong>addHeader</strong> (<em>Bool</em>) &#8211; whether or not to add a header line</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>&#64;raise ValueError: when modulestore JSON could not be parsed.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.getCategory">
<tt class="descname">getCategory</tt><big>(</big><em>hashStr</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.getCategory" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a 32-bit OpenEdx hash string, return
a corresponding &#8216;org&#8217; entry. If none found,
returns None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hashStr</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; string of 32 hex digits</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the category associated with the hash. Ex.: &#8216;problem&#8217;, &#8216;vertical&#8217;, &#8216;video&#8217;</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {String | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.getCourseShortName">
<tt class="descname">getCourseShortName</tt><big>(</big><em>hashStr</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.getCourseShortName" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a 32-bit OpenEdx hash string, return
a corresponding &#8216;org&#8217; entry. If none found,
returns None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hashStr</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; string of 32 hex digits</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the short name of the course associated with the hash. Ex: &#8216;HRP258&#8217;</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {String | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.getDisplayName">
<tt class="descname">getDisplayName</tt><big>(</big><em>hashStr</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.getDisplayName" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a 32-bit OpenEdx hash string, return
a corresponding display_name. If none found,
returns None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hashStr</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; string of 32 hex digits</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a display name as was used on the course Web site</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {String | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.getOrg">
<tt class="descname">getOrg</tt><big>(</big><em>hashStr</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.getOrg" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a 32-bit OpenEdx hash string, return
a corresponding &#8216;org&#8217; entry. If none found,
returns None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hashStr</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; string of 32 hex digits</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the organization that offered the class or resource</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {String | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.getRevision">
<tt class="descname">getRevision</tt><big>(</big><em>hashStr</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.getRevision" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a 32-bit OpenEdx hash string, return
a corresponding &#8216;org&#8217; entry. If none found,
returns None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hashStr</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; string of 32 hex digits</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the revision of the resource associated with the hash</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {String | None}</p>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.hashLookupCache">
<tt class="descname">hashLookupCache</tt><em class="property"> = None</em><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.hashLookupCache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.importModstore">
<tt class="descname">importModstore</tt><big>(</big><em>jsonFileName</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.importModstore" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects to S3 modulestore MongoDB and loads an
excerpt into the jsonFileName&#8217;s directory, where
the methods above can find it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jsonFileName</strong> (<em>String</em>) &#8211; target name of JSON file into which the modstore excerpt
is to be loaded. The underlying script, cronRefreshModuleStore.sh,
is hard-coded to link the JSON file to modulestore_latest.json. So
only the directory part of jsonFileName is used.</td>
</tr>
</tbody>
</table>
<p>&#64;raise OSError: when there is a problem calling the cronRefreshModuleStore.sh script.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.loadModstoreFromJSON">
<tt class="descname">loadModstoreFromJSON</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.loadModstoreFromJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the JSON file path passed into __init__(), read that file,
and extract a dict:</p>
<div class="highlight-python"><pre>OpenEdxHashNum --&gt; {org, short_course_name, category, revision, display_name}</pre>
</div>
<p>That dict is stored in self.hashLookup().
Input is the raw JSON from the modulestore. Sample lines, all regarding
the same class, HRP259:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span> <span class="s">&quot;_id&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s">&quot;tag&quot;</span> <span class="p">:</span> <span class="s">&quot;i4x&quot;</span><span class="p">,</span> <span class="s">&quot;org&quot;</span> <span class="p">:</span> <span class="s">&quot;Medicine&quot;</span><span class="p">,</span> <span class="s">&quot;course&quot;</span> <span class="p">:</span> <span class="s">&quot;HRP259&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span> <span class="p">:</span> <span class="s">&quot;about&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;video&quot;</span><span class="p">,</span> <span class="s">&quot;revision&quot;</span> <span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">{</span> <span class="s">&quot;_id&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s">&quot;tag&quot;</span> <span class="p">:</span> <span class="s">&quot;i4x&quot;</span><span class="p">,</span> <span class="s">&quot;org&quot;</span> <span class="p">:</span> <span class="s">&quot;Medicine&quot;</span><span class="p">,</span> <span class="s">&quot;course&quot;</span> <span class="p">:</span> <span class="s">&quot;HRP259&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span> <span class="p">:</span> <span class="s">&quot;chapter&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;495757ee7b25401599b1ef0495b068e4&quot;</span><span class="p">,</span> <span class="s">&quot;revision&quot;</span> <span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">{</span> <span class="s">&quot;_id&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s">&quot;tag&quot;</span> <span class="p">:</span> <span class="s">&quot;i4x&quot;</span><span class="p">,</span> <span class="s">&quot;org&quot;</span> <span class="p">:</span> <span class="s">&quot;Medicine&quot;</span><span class="p">,</span> <span class="s">&quot;course&quot;</span> <span class="p">:</span> <span class="s">&quot;HRP259&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span> <span class="p">:</span> <span class="s">&quot;course&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;Fall2013&quot;</span><span class="p">,</span> <span class="s">&quot;revision&quot;</span> <span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">{</span> <span class="s">&quot;_id&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s">&quot;tag&quot;</span> <span class="p">:</span> <span class="s">&quot;i4x&quot;</span><span class="p">,</span> <span class="s">&quot;org&quot;</span> <span class="p">:</span> <span class="s">&quot;Medicine&quot;</span><span class="p">,</span> <span class="s">&quot;course&quot;</span> <span class="p">:</span> <span class="s">&quot;HRP259&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span> <span class="p">:</span> <span class="s">&quot;course_info&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;handouts&quot;</span><span class="p">,</span> <span class="s">&quot;revision&quot;</span> <span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">{</span> <span class="s">&quot;_id&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s">&quot;tag&quot;</span> <span class="p">:</span> <span class="s">&quot;i4x&quot;</span><span class="p">,</span> <span class="s">&quot;org&quot;</span> <span class="p">:</span> <span class="s">&quot;Medicine&quot;</span><span class="p">,</span> <span class="s">&quot;course&quot;</span> <span class="p">:</span> <span class="s">&quot;HRP259&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span> <span class="p">:</span> <span class="s">&quot;course_info&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;updates&quot;</span><span class="p">,</span> <span class="s">&quot;revision&quot;</span> <span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
<p>When &#8216;_id.name&#8217; is a hash str, we want it to be the key of the
self.hashLookup dict we are building; these quantities are unique.</p>
<p>However, very important entry for each class is the one with _id.category==&#8217;course&#8217;.
Its _id.name field usually holds the long name of a class, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span> <span class="s">&quot;_id&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s">&quot;tag&quot;</span> <span class="p">:</span> <span class="s">&quot;i4x&quot;</span><span class="p">,</span> <span class="s">&quot;org&quot;</span> <span class="p">:</span> <span class="s">&quot;Medicine&quot;</span><span class="p">,</span> <span class="s">&quot;course&quot;</span> <span class="p">:</span> <span class="s">&quot;HRP258&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span> <span class="p">:</span> <span class="s">&quot;course&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;Statistics_in_Medicine&quot;</span><span class="p">,</span> <span class="s">&quot;revision&quot;</span> <span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
<p>So we need to use a different key than _id.name in our self.hashLookup.
We <em>cannot</em> just use _id.name! In the above case, HRP258, that key would
be Statistics_in_Medicine, and it would work fine. But _id.name is often
not unique, and entries in the self.hashLookup dict would be overwritten.
Like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span> <span class="s">&quot;_id&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s">&quot;tag&quot;</span> <span class="p">:</span> <span class="s">&quot;i4x&quot;</span><span class="p">,</span> <span class="s">&quot;org&quot;</span> <span class="p">:</span> <span class="s">&quot;HumanitiesSciences&quot;</span><span class="p">,</span> <span class="s">&quot;course&quot;</span> <span class="p">:</span> <span class="s">&quot;Bio41&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span> <span class="p">:</span> <span class="s">&quot;course&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;Fall2013&quot;</span><span class="p">,</span> <span class="s">&quot;revision&quot;</span> <span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">{</span> <span class="s">&quot;_id&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="s">&quot;tag&quot;</span> <span class="p">:</span> <span class="s">&quot;i4x&quot;</span><span class="p">,</span> <span class="s">&quot;org&quot;</span> <span class="p">:</span> <span class="s">&quot;HumanitiesSciences&quot;</span><span class="p">,</span> <span class="s">&quot;course&quot;</span> <span class="p">:</span> <span class="s">&quot;CHEM291&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span> <span class="p">:</span> <span class="s">&quot;course&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;Fall2013&quot;</span><span class="p">,</span> <span class="s">&quot;revision&quot;</span> <span class="p">:</span> <span class="n">null</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Conclusion:</dt>
<dd><ol class="first last arabic simple">
<li>_id.category == &#8216;course&#8217;: self.hashLookup key &lt;&#8211; _id.course (e.g. &#8216;HRP259&#8217;)</li>
<li>_id.category != &#8216;course&#8217; and _id.name is a hash string: self.hashLookup key &lt;&#8211; _id.name</li>
<li>_id.category != &#8216;course&#8217; and _id.name is not a hash string: self.hashLookup key &lt;&#8211; &#8216;_id.course&#8217;_&#8217;_id.category&#8217;_&#8217;_id.name&#8217;</li>
</ol>
</dd>
</dl>
<p>This scheme is not perfect, but it suffices for what we want to do.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.logDebug">
<tt class="descname">logDebug</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.logDebug" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.logError">
<tt class="descname">logError</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.logError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.modulestoreImporter.ModulestoreImporter.logInfo">
<tt class="descname">logInfo</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#json_to_relation.modulestoreImporter.ModulestoreImporter.logInfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.mongodb">
<span id="mongodb-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">mongodb</span></tt> Module<a class="headerlink" href="#module-json_to_relation.mongodb" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="json_to_relation.mongodb.MongoDB">
<em class="property">class </em><tt class="descclassname">json_to_relation.mongodb.</tt><tt class="descname">MongoDB</tt><big>(</big><em>host='localhost'</em>, <em>ssl_keyfile=None</em>, <em>dbName='test'</em>, <em>collection='test_collection'</em>, <em>port=27017</em>, <em>user=None</em>, <em>pwd=''</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Very simple Python interface to MongoDB. Based on pymongo,
this class provides methods to get and set default databases
and collections, to insert documents, query collections, and
clear all documents in a collection.</p>
<p>The query() method encapsulates MangoDB native methods find() 
and find_one(). The query() method makes it very convenient to
to request only particular sets of fields (columns in relational 
terms). Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">myMongoDb</span><span class="o">.</span><span class="n">query</span><span class="p">({</span><span class="s">&#39;lname&#39;</span> <span class="p">:</span> <span class="s">&#39;Doe&#39;</span><span class="p">},</span> <span class="p">(</span><span class="s">&#39;fname&#39;</span><span class="p">,</span> <span class="s">&#39;lname&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.clearCollection">
<tt class="descname">clearCollection</tt><big>(</big><em>db=None</em>, <em>collection=None</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.clearCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all documents from a collection. The affected database/collection
are the current defaults, if database/collection are None, else the specified
database/collection is affected.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>db</strong> (<em>String</em>) &#8211; Name of MongoDB database, or None</li>
<li><strong>collection</strong> (<em>String</em>) &#8211; Name of MongoDB collection, or None</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Release all resources.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.dropCollection">
<tt class="descname">dropCollection</tt><big>(</big><em>db=None</em>, <em>collection=None</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.dropCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a collection from the database. The affected database/collection
are the current defaults, if database/collection are None, else the specified
database/collection is affected.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>db</strong> (<em>String</em>) &#8211; Name of MongoDB database, or None</li>
<li><strong>collection</strong> (<em>String</em>) &#8211; Name of MongoDB collection, or None</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.getCollectionName">
<tt class="descname">getCollectionName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.getCollectionName" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the name of the MongoDB collection that is
currently the default for calls to methods of this class.
&#64;rtype: String</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.getDBName">
<tt class="descname">getDBName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.getDBName" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the name of the MongoDB database that is
currently the default for calls to methods of this class.
&#64;rtype: String</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.get_collection">
<tt class="descname">get_collection</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.get_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain current default MongoDB database object</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.get_db">
<tt class="descname">get_db</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.get_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain current default MongoDB database object</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.insert">
<tt class="descname">insert</tt><big>(</big><em>doc_or_docs</em>, <em>db=None</em>, <em>collection=None</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert the given dictionary into a MongoDB collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>doc_or_docs</strong> (<em>Dict&lt;String,&lt;any&gt;&gt;</em>) &#8211; Dictionary whose entries are the documents</li>
<li><strong>db</strong> (<em>String</em>) &#8211; Name of MongoDB database, or None</li>
<li><strong>collection</strong> (<em>String</em>) &#8211; Name of MongoDB collection, or None</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.query">
<tt class="descname">query</tt><big>(</big><em>mongoQuery</em>, <em>colNameTuple=()</em>, <em>limit=0</em>, <em>db=None</em>, <em>collection=None</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for querying the database. The mongoQuery parameter is a 
dictionary conforming to the MongoDB query conventions. This query
is passed through to the underlying MongoDB.</p>
<p>The colNameTuple contains a list of field (a.k.a. relational column) names.
Result documents will contain only those fields. In contrast to MangoDB
convention, the _id field is not automatically returned in the result dictionaries.
This field is only included if the caller lists it in colNameTuple. If colNameTuple
is an empty tuple, the entirety of each document is returned for each query result.</p>
<p>The limit parameter determines how many documents will be returned. A value of zero
returns the entire result set. A value of 1 makes the method&#8217;s behavior analogous to
MangoDB&#8217;s native find_one() method.</p>
<p>The db and collection keyword arguments allow callers to address a MongoDB database
and/or collection that are not the default. After the method returns, the default
database and collection values will still be untouched.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>mongoQuery</strong> (<em>Dict&lt;String,&lt;any&gt;&gt;</em>) &#8211; MangoDB query</li>
<li><strong>colNameTuple</strong> (<em>(String)</em>) &#8211; a possibly empty tuple of field/column names to retrieve for each result document</li>
<li><strong>limit</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; maximum number of documents to return</li>
<li><strong>db</strong> (<em>String</em>) &#8211; name of MongoDB database other than the current default</li>
<li><strong>collection</strong> (<em>String</em>) &#8211; name of MongoDB collection other than the current default</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {generator&lt;ResultDict&gt;}</p>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.mongodb.MongoDB.queryCursors">
<tt class="descname">queryCursors</tt><em class="property"> = {}</em><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.queryCursors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.resultCount">
<tt class="descname">resultCount</tt><big>(</big><em>queryDict</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.resultCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Return number of results in the given query. Only works
when query has previously been issued via the query()
method AND at least one result has been extracted. That&#8217;s
because the first call to query() only returns a generator.
This isn&#8217;t good.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queryDict</strong> (<em>Dict&lt;String,&lt;any&gt;&gt;</em>) &#8211; Same query that was provided to the query() method</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">number of results, taking into account limit provided to query(). None if no result has been pulled from query()</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {int | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.setCollection">
<tt class="descname">setCollection</tt><big>(</big><em>collName</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.setCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a default MongoDB collection for subsequent calls to 
other methods of this class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>collName</strong> (<em>String</em>) &#8211; MongoDB collection name</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mongodb.MongoDB.setDB">
<tt class="descname">setDB</tt><big>(</big><em>dbName</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.MongoDB.setDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a default database within MongoDB for subsequent calls 
to other methods of this class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dbName</strong> (<em>String</em>) &#8211; MongoDB database name</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.mongodb.newMongoColl">
<em class="property">class </em><tt class="descclassname">json_to_relation.mongodb.</tt><tt class="descname">newMongoColl</tt><big>(</big><em>mongoObj</em>, <em>newCollName</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.newMongoColl" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that enables the construct &#8220;with newMongoColl(&#8216;myColl&#8217;) as coll:&#8221;
See <a class="reference external" href="http://effbot.org/zone/python-with-statement.htm">http://effbot.org/zone/python-with-statement.htm</a> for explanation</p>
</dd></dl>

<dl class="class">
<dt id="json_to_relation.mongodb.newMongoDB">
<em class="property">class </em><tt class="descclassname">json_to_relation.mongodb.</tt><tt class="descname">newMongoDB</tt><big>(</big><em>mongoObj</em>, <em>newDbName</em><big>)</big><a class="headerlink" href="#json_to_relation.mongodb.newMongoDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that enables the construct &#8220;with newMongoDB(&#8216;myDB&#8217;) as db:&#8221;
See <a class="reference external" href="http://effbot.org/zone/python-with-statement.htm">http://effbot.org/zone/python-with-statement.htm</a> for explanation</p>
</dd></dl>

</div>
<div class="section" id="module-json_to_relation.mysqldb">
<span id="mysqldb-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">mysqldb</span></tt> Module<a class="headerlink" href="#module-json_to_relation.mysqldb" title="Permalink to this headline">¶</a></h2>
<p>Created on Sep 24, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="docutils">
<dt>Modifications:</dt>
<dd><ul class="first last simple">
<li>Dec 30, 2013: Added closing of connection to close() method</li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="json_to_relation.mysqldb.MySQLDB">
<em class="property">class </em><tt class="descclassname">json_to_relation.mysqldb.</tt><tt class="descname">MySQLDB</tt><big>(</big><em>host='127.0.0.1'</em>, <em>port=3306</em>, <em>user='root'</em>, <em>passwd=''</em>, <em>db='mysql'</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Shallow interface to MySQL databases. Some niceties nonetheless.
The query() method is an iterator. So:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">mySqlObj</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;SELECT * FROM foo&#39;</span><span class="p">):</span>
     <span class="k">print</span> <span class="n">result</span>
</pre></div>
</div>
<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.bulkInsert">
<tt class="descname">bulkInsert</tt><big>(</big><em>tblName</em>, <em>colNameTuple</em>, <em>valueTupleArray</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.bulkInsert" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts large number of rows into given table. Strategy: write
the values to a temp file, then generate a LOAD INFILE LOCAL
MySQL command. Execute that command via subprocess.call(). 
Using a cursor.execute() fails with error &#8216;LOAD DATA LOCAL
is not supported in this MySQL version...&#8217; even though MySQL
is set up to allow the op (load-infile=1 for both mysql and
mysqld in my.cnf).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tblName</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; table into which to insert</li>
<li><strong>colNameTuple</strong> (<em>(str[,str[...]])</em>) &#8211; tuple containing column names in proper order, i.e.           corresponding to valueTupleArray orders.</li>
<li><strong>valueTupleArray</strong> (<em>[(&lt;anyMySQLCompatibleTypes&gt;[&lt;anyMySQLCompatibleTypes,...]])</em>) &#8211; array of n-tuples, which hold the values. Order of           values must corresond to order of column names in colNameTuple.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all cursors that are currently still open.</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.createTable">
<tt class="descname">createTable</tt><big>(</big><em>tableName</em>, <em>schema</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.createTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new table, given its name, and schema.
The schema is a dict mappingt column names to 
column types. Example: {&#8216;col1&#8217; : &#8216;INT&#8217;, &#8216;col2&#8217; : &#8216;TEXT&#8217;}</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tableName</strong> (<em>String</em>) &#8211; name of new table</li>
<li><strong>schema</strong> (<em>Dict&lt;String,String&gt;</em>) &#8211; dictionary mapping column names to column types</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.dropTable">
<tt class="descname">dropTable</tt><big>(</big><em>tableName</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.dropTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete table safely. No errors</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tableName</strong> (<em>String</em>) &#8211; name of table</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.ensureSQLTyping">
<tt class="descname">ensureSQLTyping</tt><big>(</big><em>colVals</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.ensureSQLTyping" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of items, return a string that preserves
MySQL typing. Example: (10, &#8216;My Poem&#8217;) &#8212;&gt; &#8216;10, &#8220;My Poem&#8221;&#8217;
Note that &#8216;,&#8217;.join(map(str,myList)) won&#8217;t work:
(10, &#8216;My Poem&#8217;) &#8212;&gt; &#8216;10, My Poem&#8217;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>colVals</strong> (<em>&lt;any&gt;</em>) &#8211; list of column values destined for a MySQL table</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.insert">
<tt class="descname">insert</tt><big>(</big><em>tblName</em>, <em>colnameValueDict</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dictionary mapping column names to column values,
insert the data into a specified table</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tblName</strong> (<em>String</em>) &#8211; name of table to insert into</li>
<li><strong>colnameValueDict</strong> (<em>Dict&lt;String,Any&gt;</em>) &#8211; mapping of column name to column value</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.query">
<tt class="descname">query</tt><big>(</big><em>queryStr</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Query iterator. Given a query, return one result for each
subsequent call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queryStr</strong> (<em>String</em>) &#8211; query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.truncateTable">
<tt class="descname">truncateTable</tt><big>(</big><em>tableName</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.truncateTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all table rows. No errors</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tableName</strong> (<em>String</em>) &#8211; name of table</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.mysqldb.MySQLDB.update">
<tt class="descname">update</tt><big>(</big><em>tblName</em>, <em>colName</em>, <em>newVal</em>, <em>fromCondition=None</em><big>)</big><a class="headerlink" href="#json_to_relation.mysqldb.MySQLDB.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one column with a new value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tblName</strong> (<em>String</em>) &#8211; name of table in which update is to occur</li>
<li><strong>colName</strong> (<em>String</em>) &#8211; column whose value is to be changed</li>
<li><strong>newVal</strong> (<em>type acceptable to MySQL for the given column</em>) &#8211; value acceptable to MySQL for the given column</li>
<li><strong>fromCondition</strong> (<em>String</em>) &#8211; optionally condition that selects which rows to update.                      if None, the named column in all rows are updated to                      the given value. Syntax must conform to what may be in                      a MySQL FROM clause (don&#8217;t include the &#8216;FROM&#8217; keyword)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.output_disposition">
<span id="output-disposition-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">output_disposition</span></tt> Module<a class="headerlink" href="#module-json_to_relation.output_disposition" title="Permalink to this headline">¶</a></h2>
<p>Created on Sep 14, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="docutils">
<dt>Modifications:</dt>
<dd><ul class="first last simple">
<li>Jan 1, 2013: added remove() method to OutputFile</li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="json_to_relation.output_disposition.ColumnSpec">
<em class="property">class </em><tt class="descclassname">json_to_relation.output_disposition.</tt><tt class="descname">ColumnSpec</tt><big>(</big><em>colName</em>, <em>colDataType</em>, <em>jsonToRelationProcessor</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.ColumnSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Housekeeping class. Each instance represents the name,
position, and datatype of one column. These instances are
used to generate column name headers, and
SQL insert statements.</p>
<dl class="method">
<dt id="json_to_relation.output_disposition.ColumnSpec.getDefaultValue">
<tt class="descname">getDefaultValue</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.ColumnSpec.getDefaultValue" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.ColumnSpec.getName">
<tt class="descname">getName</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.ColumnSpec.getName" title="Permalink to this definition">¶</a></dt>
<dd><p>Return column name</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">name of column</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.ColumnSpec.getSQLDefSnippet">
<tt class="descname">getSQLDefSnippet</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.ColumnSpec.getSQLDefSnippet" title="Permalink to this definition">¶</a></dt>
<dd><p>Return string snippet to use in SQL CREATE TABLE or ALTER TABLE
statement</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.ColumnSpec.getType">
<tt class="descname">getType</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.ColumnSpec.getType" title="Permalink to this definition">¶</a></dt>
<dd><p>Return SQL type</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">SQL type of colum in upper case</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.output_disposition.OutputDisposition">
<em class="property">class </em><tt class="descclassname">json_to_relation.output_disposition.</tt><tt class="descname">OutputDisposition</tt><big>(</big><em>outputFormat</em>, <em>outputDestObj=None</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Specifications for where completed relation rows
should be deposited, and in which format. Current
output options are to files, and to stdout.
This class is abstract, but make sure the subclasses
invoke this super&#8217;s __init__() when they are initialized.</p>
<p>Also defined here are available output formats, of
which there are two: CSV, and SQL insert statements AND
CSV.
NOTE: currently the CSV-only format option is broken. Not
enough time to maintain it.
SQL insert statements that are directed to files will also
generate equivalent .csv files. The insert statement files
will look like the result of a mysqldump, and inserts into
different tables are mixed. The corresponding (values-only)
csv files are split: one file for each table.</p>
<dl class="class">
<dt id="json_to_relation.output_disposition.OutputDisposition.OutputFormat">
<em class="property">class </em><tt class="descname">OutputFormat</tt><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.OutputFormat" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="json_to_relation.output_disposition.OutputDisposition.OutputFormat.CSV">
<tt class="descname">CSV</tt><em class="property"> = 0</em><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.OutputFormat.CSV" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.output_disposition.OutputDisposition.OutputFormat.SQL_INSERTS_AND_CSV">
<tt class="descname">SQL_INSERTS_AND_CSV</tt><em class="property"> = 2</em><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.OutputFormat.SQL_INSERTS_AND_CSV" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.output_disposition.OutputDisposition.OutputFormat.SQL_INSERT_STATEMENTS">
<tt class="descname">SQL_INSERT_STATEMENTS</tt><em class="property"> = 1</em><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.OutputFormat.SQL_INSERT_STATEMENTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputDisposition.addSchemaHints">
<tt class="descclassname">OutputDisposition.</tt><tt class="descname">addSchemaHints</tt><big>(</big><em>tableName</em>, <em>schemaHints</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.addSchemaHints" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a schema hint dict for the table of the given name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tableName</strong> (<em>String</em>) &#8211; name of table to which schema applies. The name may be None, in which case it refers to the main (default) table.</li>
<li><strong>schemaHints</strong> (<em>[ordered]Dict&lt;String,ColumnSpec&gt;</em>) &#8211; dict mapping column names to SQL types via ColumnSpec instances</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputDisposition.createTmpTableFile">
<tt class="descclassname">OutputDisposition.</tt><tt class="descname">createTmpTableFile</tt><big>(</big><em>tableName</em>, <em>fileSuffix</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.createTmpTableFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for cases in which parsers must create more than one
table. Those tables need to be written to disk, even when
output of the main table is piped.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tableName</strong> (<em>String</em>) &#8211; name by which the table file obj can be retrieved</li>
<li><strong>fileSuffix</strong> (<em>String</em>) &#8211; suffix for temp file name. Ex. &#8216;csv&#8217; for CSV outputs, or &#8216;sql&#8217; for SQL dumps</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">file object open for writing</p>
</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: File</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputDisposition.ensureColExistence">
<tt class="descclassname">OutputDisposition.</tt><tt class="descname">ensureColExistence</tt><big>(</big><em>colName</em>, <em>colDataType</em>, <em>jsonToRelationConverter</em>, <em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.ensureColExistence" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a column name and MySQL datatype name, check whether this
column has previously been encountered. If not, a column information
object is created, which will eventually be used to create the column
header, or SQL alter statements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>colName</strong> (<em>String</em>) &#8211; name of the column to consider</li>
<li><strong>colDataType</strong> (<em>ColDataType</em>) &#8211; datatype of the column.</li>
<li><strong>tableName</strong> (<em>{String | None}</em>) &#8211; name of table to which the column is to belong; None if for main table</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputDisposition.flush">
<tt class="descclassname">OutputDisposition.</tt><tt class="descname">flush</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputDisposition.getOutputFormat">
<tt class="descclassname">OutputDisposition.</tt><tt class="descname">getOutputFormat</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.getOutputFormat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputDisposition.getSchema">
<tt class="descclassname">OutputDisposition.</tt><tt class="descname">getSchema</tt><big>(</big><em>tableName</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.getSchema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputDisposition.getSchemaHint">
<tt class="descclassname">OutputDisposition.</tt><tt class="descname">getSchemaHint</tt><big>(</big><em>colName</em>, <em>tableName</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.getSchemaHint" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a column name, and a table name, return the ColumnSpec object
that describes that column. If tableName is None, the main (default)
table&#8217;s schema will be searched for a colName entry</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>colName</strong> (<em>String</em>) &#8211; name of column whose schema info is sought</li>
<li><strong>tableName</strong> (<em>String</em>) &#8211; name of table in which the given column resides</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of ColumnSpec instances</p>
</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: (ColumnSpec)
&#64;raise KeyError: if table or column are not found</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputDisposition.getSchemaHintByPos">
<tt class="descclassname">OutputDisposition.</tt><tt class="descname">getSchemaHintByPos</tt><big>(</big><em>pos</em>, <em>tableName</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputDisposition.getSchemaHintByPos" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.output_disposition.OutputFile">
<em class="property">class </em><tt class="descclassname">json_to_relation.output_disposition.</tt><tt class="descname">OutputFile</tt><big>(</big><em>fileName</em>, <em>outputFormat</em>, <em>options='ab'</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#json_to_relation.output_disposition.OutputDisposition" title="json_to_relation.output_disposition.OutputDisposition"><tt class="xref py py-class docutils literal"><span class="pre">json_to_relation.output_disposition.OutputDisposition</span></tt></a></p>
<dl class="attribute">
<dt id="json_to_relation.output_disposition.OutputFile.TABLE_NAME_PATTERN">
<tt class="descname">TABLE_NAME_PATTERN</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x2a59710&gt;</em><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.TABLE_NAME_PATTERN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="json_to_relation.output_disposition.OutputFile.VALUES_PATTERN">
<tt class="descname">VALUES_PATTERN</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x263a4e0&gt;</em><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.VALUES_PATTERN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.ensureOpenCSVOutFileFromTableName">
<tt class="descname">ensureOpenCSVOutFileFromTableName</tt><big>(</big><em>tableName</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.ensureOpenCSVOutFileFromTableName" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether an open File object exists for the given
table. If not, creates one. Returns the FD. The output
file is created in the same directory as self.out</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tableName</strong> (<em>String</em>) &#8211; name of table whose CSV output file we are to check for, or create</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a File object open for writing/appending</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: File</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.flush">
<tt class="descname">flush</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.getCSVTableOutFileName">
<tt class="descname">getCSVTableOutFileName</tt><big>(</big><em>tableName</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.getCSVTableOutFileName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.getFileName">
<tt class="descname">getFileName</tt><big>(</big><em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.getFileName" title="Permalink to this definition">¶</a></dt>
<dd><p>Get file name of a MySQL INSERT statement outfile,
or, given a table name, the name of the outfile
for CSV destined to the given table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tableName</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.remove">
<tt class="descname">remove</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.startNewTable">
<tt class="descname">startNewTable</tt><big>(</big><em>tableName</em>, <em>schemaHintsNewTable</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.startNewTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when parser needs to create a table beyond
the main table (in case of CSV-Only), or any table
in case of SQLInsert+CSV.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tableName</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; name of new table</li>
<li><strong>schemaHintsNewTable</strong> (<em>{String,ColDataType}</em>) &#8211; map column name to column SQL type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.write">
<tt class="descname">write</tt><big>(</big><em>whatToWrite</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write given string straight to the output. No assumption made about the format</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>whatToWrite</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.writeCSVRowsFromInsertStatement">
<tt class="descname">writeCSVRowsFromInsertStatement</tt><big>(</big><em>insertStatement</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.writeCSVRowsFromInsertStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes one SQL INSERT INTO Statement, possibly including multiple VALUES
lines. Extracts the destination table and the values list(s), and writes
them to disk via the appropriate CSVWriter. The INSERT statements are
expected to be very regular, generated by json_to_relation. Don&#8217;t use
this method for arbitrary INSERT statements, b/c it relies on regular
expressions that expect the specific format. Prerequisite: self.tableCSVWriters
is a dictionary that maps table names into File objects that are open
for writing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>insertStatement</strong> (<em>String</em>) &#8211; Well-formed MySQL INSERT statement</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>&#64;raise ValueError: if table name could not be extracted from the</dt>
<dd>INSERT statement, or if the insertStatement contains no VALUES
clause.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputFile.writerow">
<tt class="descname">writerow</tt><big>(</big><em>colElementArray</em>, <em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputFile.writerow" title="Permalink to this definition">¶</a></dt>
<dd><p>How I wish Python had parameter type based polymorphism. Life
would be so much cleaner.</p>
<p>ColElementArray is either an array of values (coming from
a CSV-only parser), or a string that contains a complete
MySQL INSERT statement (from MySQL dump-creating parsers).
In the first case, we ensure all elements in the array are
strings, and write to output. In the latter case we write
the INSERT statements to their output file. Then, if output
format is SQL_INSERTS_AND_CSV, we also extract the MySQL
values and write them to the proper CSV file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>colElementArray</strong> (<em>{String | [string]}</em>) &#8211; either a MySQL INSERT statement, or an array of values</li>
<li><strong>tableName</strong> (<em>String</em>) &#8211; name of table to which output is destined. Only needed for 
value arrays from CSV-only parsers. Their value arrays don&#8217;t contain
info on the destination table. INSERT statements do contain the destination table
name.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.output_disposition.OutputPipe">
<em class="property">class </em><tt class="descclassname">json_to_relation.output_disposition.</tt><tt class="descname">OutputPipe</tt><big>(</big><em>outputFormat</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputPipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#json_to_relation.output_disposition.OutputDisposition" title="json_to_relation.output_disposition.OutputDisposition"><tt class="xref py py-class docutils literal"><span class="pre">json_to_relation.output_disposition.OutputDisposition</span></tt></a></p>
<dl class="method">
<dt id="json_to_relation.output_disposition.OutputPipe.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputPipe.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputPipe.flush">
<tt class="descname">flush</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputPipe.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputPipe.startNewTable">
<tt class="descname">startNewTable</tt><big>(</big><em>tableName</em>, <em>schemaHintsNewTable</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputPipe.startNewTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when parser needs to create a table beyond
the main table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>schemaHintsNewTable</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputPipe.write">
<tt class="descname">write</tt><big>(</big><em>whatToWrite</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputPipe.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write given string straight to the output. No assumption made about the format</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>whatToWrite</strong> &#8211; </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.OutputPipe.writerow">
<tt class="descname">writerow</tt><big>(</big><em>colElementArray</em>, <em>tableName=None</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.OutputPipe.writerow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="json_to_relation.output_disposition.TableSchemas">
<em class="property">class </em><tt class="descclassname">json_to_relation.output_disposition.</tt><tt class="descname">TableSchemas</tt><a class="headerlink" href="#json_to_relation.output_disposition.TableSchemas" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Repository for the schemas of all tables. A schema is an 
array ColumnSpec instances. Each such list is associated with
one relational table. A class var dict holds the schemas for
all tables.</p>
<dl class="method">
<dt id="json_to_relation.output_disposition.TableSchemas.addColSpec">
<tt class="descname">addColSpec</tt><big>(</big><em>tableName</em>, <em>colSpec</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.TableSchemas.addColSpec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="json_to_relation.output_disposition.TableSchemas.addColSpecs">
<tt class="descname">addColSpecs</tt><big>(</big><em>tableName</em>, <em>colSpecsDict</em><big>)</big><a class="headerlink" href="#json_to_relation.output_disposition.TableSchemas.addColSpecs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.test_course_id_extraction">
<span id="test-course-id-extraction-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">test_course_id_extraction</span></tt> Module<a class="headerlink" href="#module-json_to_relation.test_course_id_extraction" title="Permalink to this headline">¶</a></h2>
<p>Created on Oct 11, 2013</p>
<p>&#64;author: paepcke</p>
<dl class="class">
<dt id="json_to_relation.test_course_id_extraction.Test">
<em class="property">class </em><tt class="descclassname">json_to_relation.test_course_id_extraction.</tt><tt class="descname">Test</tt><big>(</big><em>methodName='runTest'</em><big>)</big><a class="headerlink" href="#json_to_relation.test_course_id_extraction.Test" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">unittest.case.TestCase</span></tt></p>
<dl class="method">
<dt id="json_to_relation.test_course_id_extraction.Test.get_course_id">
<tt class="descname">get_course_id</tt><big>(</big><em>event</em><big>)</big><a class="headerlink" href="#json_to_relation.test_course_id_extraction.Test.get_course_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a &#8216;pythonized&#8217; JSON tracking event object, find
the course URL, and extract the course name from it.
A number of different events occur, which do not contain
course IDs: server heartbeats, account creation, dashboard
accesses. Among them are logins, which look like this:</p>
<dl class="docutils">
<dt>{&#8220;username&#8221;: &#8220;&#8221;, </dt>
<dd><p class="first">&#8220;host&#8221;: &#8220;class.stanford.edu&#8221;, 
&#8220;event_source&#8221;: &#8220;server&#8221;, 
&#8220;event_type&#8221;: &#8220;/accounts/login&#8221;, 
&#8220;time&#8221;: &#8220;2013-06-14T00:31:57.661338&#8221;, 
&#8220;ip&#8221;: &#8220;98.230.189.66&#8221;, 
&#8220;event&#8221;: &#8220;{</p>
<blockquote>
<div><p>&#8220;POST&#8221;: {}, 
&#8220;GET&#8221;: {</p>
<blockquote>
<div>&#8220;next&#8221;: [&#8220;/courses/Medicine/HRP258/Statistics_in_Medicine/courseware/80160e.../&#8221;]}}&#8221;,</div></blockquote>
</div></blockquote>
<p class="last">&#8220;agent&#8221;: &#8220;Mozilla/5.0 (Windows NT 5.1; rv:21.0) Gecko/20100101
Firefox/21.0&#8221;, 
&#8220;page&#8221;: null}</p>
</dd>
</dl>
<p>Notice the &#8216;event&#8217; key&#8217;s value being a <em>string</em> containing JSON, rather than 
a nested JSON object. This requires special attention. Buried inside
that string is the &#8216;next&#8217; tag, whose value is an array with a long (here
partially elided) hex number. This is where the course number is
extracted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> (<em>Dict&lt;String,Dict&lt;&lt;any&gt;&gt;</em>) &#8211; JSON record of an edx tracking event as internalized dict</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">two-tuple: fulle name of course in which event occurred, and descriptive name.
None if course ID could not be obtained.</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: {(String,String) | None}</p>
</dd></dl>

<dl class="method">
<dt id="json_to_relation.test_course_id_extraction.Test.testCourseIDExtraction">
<tt class="descname">testCourseIDExtraction</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.test_course_id_extraction.Test.testCourseIDExtraction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-json_to_relation.utils">
<span id="utils-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">utils</span></tt> Module<a class="headerlink" href="#module-json_to_relation.utils" title="Permalink to this headline">¶</a></h2>
<p>Created on Jan 5, 2014</p>
<p>&#64;author: paepcke</p>
<dl class="class">
<dt id="json_to_relation.utils.Utils">
<em class="property">class </em><tt class="descclassname">json_to_relation.utils.</tt><tt class="descname">Utils</tt><a class="headerlink" href="#json_to_relation.utils.Utils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Utilities for use in json_to_relation. All class level methods</p>
<dl class="attribute">
<dt id="json_to_relation.utils.Utils.attemptedMakeHashMapper">
<tt class="descname">attemptedMakeHashMapper</tt><em class="property"> = False</em><a class="headerlink" href="#json_to_relation.utils.Utils.attemptedMakeHashMapper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="json_to_relation.utils.Utils.ensureHashMapper">
<em class="property">classmethod </em><tt class="descname">ensureHashMapper</tt><big>(</big><big>)</big><a class="headerlink" href="#json_to_relation.utils.Utils.ensureHashMapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates facility, ModulestoreImporter, which turns OpenEdX resource IDs into
human readable strings. the ModulestoreImporter instance
is placed in class variable hashMapper. The Creation can fail,
so that variable may remain None after calling this method.
Callers must check for this condition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cls</strong> (<em>Utils</em>) &#8211; this class instance; passed transparently by Python</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="json_to_relation.utils.Utils.extractOpenEdxHash">
<em class="property">classmethod </em><tt class="descname">extractOpenEdxHash</tt><big>(</big><em>idStr</em><big>)</big><a class="headerlink" href="#json_to_relation.utils.Utils.extractOpenEdxHash" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Given a string, such as::</dt>
<dd>i4x-Medicine-HRP258-videoalpha-7cd4bf0813904612bcd583a73ade1d54
or:
input_i4x-Medicine-HRP258-problem-98ca37dbf24849debcc29eb36811cb68_3_1_choice_3&#8217;</dd>
</dl>
<p>extract and return the 32 bit hash portion. If none is found,
return None. Method takes any string and finds a 32 bit hex number.
It is up to the caller to ensure that the return is meaningful. As
a minimal check, the method does ensure that there is at most one 
qualifying string present; we know that this is the case with problem_id
and other strings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cls</strong> (<em>Utils</em>) &#8211; this class instance; passed transparently by Python</li>
<li><strong>idStr</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; problem, module, video ID and others that might contain a 32 bit OpenEdx platform hash</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.utils.Utils.findHashPattern">
<tt class="descname">findHashPattern</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x29c9988&gt;</em><a class="headerlink" href="#json_to_relation.utils.Utils.findHashPattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="json_to_relation.utils.Utils.getModuleNameFromID">
<em class="property">classmethod </em><tt class="descname">getModuleNameFromID</tt><big>(</big><em>moduleID</em><big>)</big><a class="headerlink" href="#json_to_relation.utils.Utils.getModuleNameFromID" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a module or sequence id hash, possibly 
embedded in another string, return a human readable
resolution if possible. Example input:</p>
<div class="highlight-python"><pre>i4x://Medicine/HRP258/sequential/99b37c2c139b45cab9a06fb49ff6594f</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cls</strong> (<em>Utils</em>) &#8211; this class instance; passed transparently by Python</li>
<li><strong>moduleID</strong> (<em>String</em>) &#8211; the sequence or module hash, possibly embedded in a string</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="json_to_relation.utils.Utils.hashMapper">
<tt class="descname">hashMapper</tt><em class="property"> = None</em><a class="headerlink" href="#json_to_relation.utils.Utils.hashMapper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="json_to_relation.utils.Utils.makeInsertSafe">
<em class="property">classmethod </em><tt class="descname">makeInsertSafe</tt><big>(</big><em>unsafeStr</em><big>)</big><a class="headerlink" href="#json_to_relation.utils.Utils.makeInsertSafe" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes the given string safe for use as a value in a MySQL INSERT
statement. Looks for embedded CR or LFs, and turns them into 
semicolons. Escapes commas and single quotes. Backslash is
replaced by double backslash. This is needed for unicode, like
5 (invented example)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>unsafeStr</strong> (<em>String</em>) &#8211; string that possibly contains unsafe chars</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">same string, with unsafe chars properly replaced or escaped</td>
</tr>
</tbody>
</table>
<p>&#64;rtype: String</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="json_to_relation.test.html">test Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="json_to_relation.test.html#module-json_to_relation.test.testAddAnonToActivityGradeTable"><tt class="docutils literal"><span class="pre">testAddAnonToActivityGradeTable</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="json_to_relation.test.html#module-json_to_relation.test.test_edxTrackLogJSONParser"><tt class="docutils literal"><span class="pre">test_edxTrackLogJSONParser</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="json_to_relation.test.html#module-json_to_relation.test.test_json_to_relation"><tt class="docutils literal"><span class="pre">test_json_to_relation</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="json_to_relation.test.html#module-json_to_relation.test.test_modulestoreImporter"><tt class="docutils literal"><span class="pre">test_modulestoreImporter</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="json_to_relation.test.html#module-json_to_relation.test.test_mongodb"><tt class="docutils literal"><span class="pre">test_mongodb</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="json_to_relation.test.html#module-json_to_relation.test.test_utils"><tt class="docutils literal"><span class="pre">test_utils</span></tt> Module</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">json_to_relation Package</a><ul>
<li><a class="reference internal" href="#module-json_to_relation.col_data_type"><tt class="docutils literal"><span class="pre">col_data_type</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.edxTrackLogJSONParser"><tt class="docutils literal"><span class="pre">edxTrackLogJSONParser</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.generic_json_parser"><tt class="docutils literal"><span class="pre">generic_json_parser</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.input_source"><tt class="docutils literal"><span class="pre">input_source</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.json_to_relation"><tt class="docutils literal"><span class="pre">json_to_relation</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.locationManager"><tt class="docutils literal"><span class="pre">locationManager</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.modulestoreImporter"><tt class="docutils literal"><span class="pre">modulestoreImporter</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.mongodb"><tt class="docutils literal"><span class="pre">mongodb</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.mysqldb"><tt class="docutils literal"><span class="pre">mysqldb</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.output_disposition"><tt class="docutils literal"><span class="pre">output_disposition</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.test_course_id_extraction"><tt class="docutils literal"><span class="pre">test_course_id_extraction</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-json_to_relation.utils"><tt class="docutils literal"><span class="pre">utils</span></tt> Module</a></li>
<li><a class="reference internal" href="#subpackages">Subpackages</a><ul>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/json_to_relation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">json_to_relation 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Andreas Paepcke.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>